<div class=modal><ion-modal-view><main id=messenger-content cache-view=false class="pane uguru-view guru-view bg-slate guru-view-mobile full-x" nav-view=active><header><div class=header-nav><a class="header-nav-back mobile-message-options" ng-click=toggleMessageOptions()><svg viewBox="0 0 100 100"><path ng-show=!messageOptionsShown d="M14,23 L86,23"></path><path d="M14,50 L86,50"></path><path ng-show=!messageOptionsShown d="M14,77 L86,77"></path></svg> </a><a class="header-nav-close header-close" ng-click=messagesModal.hide()><svg viewBox="0 0 100 100"><path d="M50,50 L50,14 L50,50 L14,50 L50,50 Z M50,50 L50,86 L50,50 L86,50 L50,50 Z"></path></svg></a></div><h1 class=text-center>{{active_relationship.guru.name}}</h1></header><section id=message-container><ul id=messenger-subheader class='ng-class:{"active":messageOptionsShown}'><li ng-repeat="relationship in user.guru_relationships" ng-if=relationship.guru.name><a ng-click=setToActiveRelationship(relationship) ng-if="relationship.id !== active_relationship.id" class=relative><span class=student-photo-container><img ng-src={{relationship.student.profile_url}}> <span class=guru-name>{{relationship.student.name || 'NA'}}</span></span></a></li></ul><div id=messages class=scroll><div id=message-empty-state class="full-xy flex-center text-center" ng-if="!active_relationship || !active_relationship.messages || !active_relationship.messages.length"><p>This is the beginning of your conversation thread with <span>this Guru</span>.</p></div><div ng-repeat="message in active_relationship.messages" class="message-single ng-class:{'left': message.sender.id !== user.id, 'right': user.id === message.sender.id}" on-hold="onMessageHold($event, $index, message)"><div class=message-single-icon ng-if="message.sender.id !== user.id"><img ng-if=user.profile_url ng-src={{message.sender.profile_url}}></div><div class=message-single-content><div class=message-single-info><span ng-if="message.sender.id !== user.id">{{message.sender.name}}</span> <span ng-if="message.sender.id === user.id">Me</span> <span>{{message.time_created}}</span></div><div class=message-single-message>{{message.contents}}</div></div><div class=message-single-icon ng-if="message.sender.id === user.id"><img ng-if=user.profile_url ng-src={{user.profile_url}}></div></div></div><form name=sendMessageForm ng-submit=sendMessage(sendMessageForm) novalidate class="ng-valid-minlength ng-valid-maxlength ng-dirty ng-submitted ng-invalid ng-invalid-required"><ion-footer-bar class="bar-stable item-input-inset message-footer bar bar-footer" keyboard-attach=""><label class=item-input-wrapper><textarea ng-model=active_relationship.new_message value="" placeholder="Send {{active_relationship.student.name}} a message..." required minlength=1 maxlength=1500 msd-elastic="" class="ng-valid-minlength ng-valid-maxlength ng-touched ng-dirty ng-invalid ng-invalid-required" style="overflow: hidden; word-wrap: break-word; resize: none; height: 20px"></textarea></label><div class=footer-btn-wrap><button type=submit ng-click=sendMessage(active_relationship.new_message)><svg viewBox="0 0 100 100"><path d="M40.863416,69.0006669 L19,69.0006669 L49.6939787,14 L80.425686,69.0006669 L58.5612746,69.0006669 L49.7317073,85.6527248 L40.863416,69.0006669 Z M49.7317073,15.3170732 L49.7317073,85.5664621 M49.7317073,14.7032382 L58.6,68.0056713 M49.7317073,15.1365913 L40.8634146,68.4390244"></path></svg></button></div></ion-footer-bar></form></section></main></ion-modal-view></div>