<ion-view class='uguru-view guru-desktop-credibility credibility-view bg-charcoal'>
	<section id="credibility" ng-if='!desktopMode'>
		<header class="bg-charcoal third">
			<h1 class='bg-charcoal full-x text-center'>Guru Credibility</h1>
		    <div class="header-nav full-x">
				<a class="header-close cta-modal-close" ng-click="credibilityModal.hide()">
					<svg viewBox="0 0 100 100">
						<path d="M50,50 L50,14 L50,50 L14,50 L50,50 Z M50,50 L50,86 L50,50 L86,50 L50,50 Z"></path>
					</svg>
				</a>
			</div>
			<nav id="credit-slider">
				<ul>
					<li id="credit-grades" class="ng-class: {'active': activeTabIndex === 0}">
						<a ng-click='activeTabIndex = 0;'>
							<span class="credit-icon" ng-if='!user.transcript_file || !user.transcript_file.url'>
								<svg viewBox="0 0 100 100">
									<path d="M26.5585171,14 C23.7977205,14 21.5596527,16.2337694 21.5596527,19.0057363 L21.5596527,80.9942637 C21.5596527,83.7588555 23.7894161,86 26.5575218,86 L73.4417836,86 C76.2020305,86 78.4396823,83.7643283 78.4397188,81.0001225 L78.4403462,33.5605722 C78.4403609,32.4548035 77.7876011,30.9334881 77.0011727,30.1806226 L61.5384132,15.3777783 C60.7435649,14.6168523 59.2032934,14 58.1083137,14 L26.5585171,14 Z M60.0992131,14.96 C60.0992131,14.96 60.0992131,15.4039671 60.0992131,15.9609247 L60.0992131,26.5558242 C60.0992131,29.318671 62.3364841,31.5584009 65.1045233,31.5584009 L77.4848101,31.5584009 M41.683345,57.831963 L58.316655,57.831963 M63.168037,71 L50,34.9611619 L36.831963,71"></path>
								</svg>
							</span>
							<span class='credit-icon credibility-checkmark' ng-if='user.transcript_file && user.transcript_file.id'>
								<svg viewBox="0 0 100 100">
									<path d="M14,54.2352941 L35.1764706,75.4117647 L86,24.5882353"></path>
								</svg>
							</span>
							<span class="credit-label">Grades</span>
						</a>
					</li>
					<li id="credit-fb" class="ng-class: {'active': activeTabIndex === 1}">
						<a ng-click='activeTabIndex = 1;'>
							<span class="credit-icon" ng-if='!user.fb_id'>
								<svg viewBox="0 0 100 100">
									<path d="M55.4195133,53.069899 L66.137128,53.069899 L67.7417426,40.6259489 L55.4195133,40.6259489 L55.4195133,32.6810366 C55.4195133,29.0782226 56.4198487,26.6231067 61.5864977,26.6231067 L68.1761069,26.6200173 L68.1761069,15.4902817 C67.0358234,15.338903 63.1246911,15 58.5740608,15 C49.0733459,15 42.5690031,20.7990414 42.5690031,31.448999 L42.5690031,40.6259489 L31.8238931,40.6259489 L31.8238931,53.069899 L42.5690031,53.069899 L42.5690031,85 L55.4195133,85 L55.4195133,53.069899 Z"></path>
								</svg>
							</span>
							<span class='credit-icon credibility-checkmark' ng-if='user.fb_id'>
								<svg viewBox="0 0 100 100">
									<path d="M14,54.2352941 L35.1764706,75.4117647 L86,24.5882353"></path>
								</svg>
							</span>
							<span class="credit-label">Facebook</span>
						</a>
					</li>
					<li id="credit-phone" class="ng-class: {'active': activeTabIndex === 2}">
						<a ng-click='activeTabIndex = 2;'>
							<span class="credit-icon" ng-if="!user.phone_number_confirmed">
								<svg viewBox="0 0 100 100">
									<path d="M83.7938561,79.3821434 L78.6699409,84.5071137 C77.7551539,85.4205819 75.0764739,85.9906092 74.9904818,85.9906092 C58.7807089,86.131995 43.1731445,79.7648873 31.705598,68.2962858 C20.2066618,56.790755 13.8321683,41.1275331 14.0033612,24.8631579 C14.0033612,24.8557721 14.5900066,22.2538519 15.5040023,21.3485609 L20.6276537,16.2241181 C22.5025978,14.3404693 26.104242,13.4892531 28.6272922,14.3333473 L29.7050949,14.6928786 C32.2207592,15.5361814 34.8619825,18.3177354 35.5570413,20.8803525 L38.13443,30.34001 C38.8294888,32.9100129 37.8920167,36.5662594 36.0176002,38.4412035 L32.5963811,41.8629501 C35.9553482,54.2980395 45.7122852,64.0568229 58.1494848,67.4239672 L61.5693849,64.0014293 C63.4530338,62.1177804 67.1079614,61.1810997 69.6724249,61.8751034 L79.1307636,64.4617243 C81.6939082,65.1660154 84.4749346,67.7906206 85.3179736,70.3054936 L85.677505,71.3988593 C86.5131582,73.9147874 85.6685365,77.5156402 83.7938561,79.3821434 L83.7938561,79.3821434 Z"></path>
								</svg>
							</span>
							<span class='credit-icon credibility-checkmark' ng-if='user.phone_number_confirmed'>
								<svg viewBox="0 0 100 100">
									<path d="M14,54.2352941 L35.1764706,75.4117647 L86,24.5882353"></path>
								</svg>
							</span>
							<span class="credit-label">Phone</span>
						</a>
					</li>
					<li id="credit-email" class="ng-class: {'active': activeTabIndex === 3}">
						<a ng-click='activeTabIndex = 3;'>
							<span class="credit-icon" ng-if='!user.school_email_confirmed'>
								<svg viewBox="0 0 100 100">
									<path d="M15,31.9968376 C15,27.5803062 18.579658,24 22.9957852,24 L77.0042148,24 C81.420165,24 85,27.5741706 85,31.9968376 L85,68.0031624 C85,72.4196938 81.420342,76 77.0042148,76 L22.9957852,76 C18.579835,76 15,72.4258294 15,68.0031624 L15,31.9968376 L15,31.9968376 Z M84.9111543,31.4941352 L49.9585003,55.0012225 L15.0058463,31.4941352 M42.8716789,50.2025451 L15.0946246,68.884039 L42.8716789,50.2025451 M57.2229457,50.2025451 L85,68.884039 L57.2229457,50.2025451"></path>
								</svg>
							</span>
							<span class='credit-icon credibility-checkmark' ng-if='user.school_email_confirmed'>
								<svg viewBox="0 0 100 100">
									<path d="M14,54.2352941 L35.1764706,75.4117647 L86,24.5882353"></path>
								</svg>
							</span>
							<span class="credit-label">Email</span>
						</a>
					</li>
					<li id="credit-exp" class="ng-class: {'active': activeTabIndex === 4}">
						<a ng-click='activeTabIndex = 4;'>
							<span class="credit-icon" ng-if='!user.guru_experiences.length'>
								<svg viewBox="0 0 100 100">
									<path d="M24.2468514,82.1914358 C18.6246851,82.1914358 14,77.5667506 14,71.9445844 L14,42.6549118 C14,37.0327456 18.6246851,32.4080605 24.2468514,32.4080605 L75.6624685,32.4080605 C81.2846348,32.4080605 85.9093199,37.0327456 85.9093199,42.6549118 L85.9093199,71.9445844 C86,77.5667506 81.3753149,82.1914358 75.6624685,82.1914358 L24.2468514,82.1914358 Z M14,66.3224181 L86,66.3224181 M41.1133501,54.534005 L58.8866499,54.534005 M27.8740554,32.1360202 L27.8740554,29.2342569 C27.8740554,22.97733 33.0428212,17.8085642 39.2997481,17.8085642 L60.790932,17.8085642 C67.0478589,17.8085642 72.2166247,22.97733 72.2166247,29.2342569 L72.2166247,32.1360202"></path>
								</svg>
							</span>
							<span class='credit-icon credibility-checkmark' ng-if='user.guru_experiences.length > 0'>
								<svg viewBox="0 0 100 100">
									<path d="M14,54.2352941 L35.1764706,75.4117647 L86,24.5882353"></path>
								</svg>
							</span>
							<span class="credit-label">Experience</span>
						</a>
					</li>
				</ul>
			</nav>
		</header>
		<div id="credibility-content-wrapper">
			<!-- Transcript upload -->
			<div id="credit-transcript" class="credit-content-slide ng-class:{'active': activeTabIndex === 0}">
				<!-- if user has no transcript -->
				<div ng-if='!user.transcript_file || !user.transcript_file.url'>
					<h1 class="section-header">Upload your transcript</h1>
					<div class="credit-body">
						<p>We will never share your data w/o your permission first</p>
					</div>
					<button ng-click='showActionSheetTranscriptPhoto()' class="semibold bg-moola">Upload your transcript</button>
				</div>
				<!-- If user has no transcript URL -->
				<div ng-if='user.transcript_file && user.transcript_file.url' class="bg-moola-50p ng-class:{'bg-transparent':!user.transcript_verified_by_admin}">
					<h1 class="section-header">Transcript Submitted</h1>
					<div class="credit-body">
						<div>
							<p ng-if='user.transcript_verified_by_admin' class="semibold">Your transcript has been verified and approved!</p>
							<p ng-if='!user.transcript_verified_by_admin'>Thank you for uploading your transcript. We're in the process of verifying your information.</p>
							<div ng-if='!transcript_verified_by_admin' class='text-center block semibold bg-cerise p15xy m30top-m15x'>Awaiting Approval</div>
						</div>
					</div>
					<button ng-click='showActionSheetTranscriptPhoto()' class="semibold bg-moola">Edit your transcript</button>
				</div>
			</div>

			<!-- Facebook slide -->
			<div id="facebook-auth" class="credit-content-slide ng-class:{'active': activeTabIndex === 1}">
				<div ng-if='!user.fb_id'>
					<h1 class="section-header">Find Your Facebook Friends</h1>
					<div class="credit-body">
						<p>Connect now to see
							<br/>which Gurus you know!</p>
					</div>
					<button class="semibold bg-fb-light" ng-click='connectWithFacebook()'>Connect with Facebook</button>
				</div>
				<div ng-if='user.fb_id' class="bg-fb">
					<h1 class="section-header">Your Facebook is connected</h1>
					<div class="credit-body">
						<p class='semibold'>Don't worry - we will never post without your permission.</p>
					</div>
				</div>
			</div>

			<!-- Phone Auth -->
			<div id="phone-number-auth" class="credit-content-slide ng-class:{'active': activeTabIndex === 2}">
				<div ng-if='!user.phone_number_confirmed'>
					<h1 class="section-header">Verify your phone</h1>
					<div class="credit-body">
						<div>
							<p ng-if='!user.phone_number'>We won't share this with anyone.</p>
							<p ng-if='user.phone_number && user.phone_number_token'>We've sent a code to <strong>{{user.phone_number}}</strong>.</p>
							<p ng-if='user.phone_number && user.phone_number_token'>
								<a class='semi-opaque semibold' ng-click='resendPhoneConfirmation()'>Resend Code?</a>
							</p>
						</div>
					</div>
					<button class="semibold bg-eggplant" id='launch-phone-confirm-popup' ng-if='!user.phone_number' ng-click='confirmPhonePopup($event)'>Add my number</button>
					<button class="semibold bg-campus" id='launch-phone-confirm-popup' ng-if='user.phone_number && user.phone_number_token' ng-click='confirmPhonePopup($event)'>Verify Code</button>
				</div>
				<div ng-if='user.phone_number_confirmed' class="bg-eggplant-50p">
					<h1 class="section-header"><span class="semibold">{{user.phone_number}}</span> is connected!</h1>
					<div class="credit-body">
						<div>
							<p>We will not use your phone number without your permission.</p>
							<p class="semibold">You're all set!</p>
						</div>
					</div>
				</div>
			</div>

			<!-- Email Auth -->
			<div id="phone-number-auth" class="credit-content-slide ng-class:{'active': activeTabIndex === 3}">
				<div ng-if='!user.school_email_confirmed'>
					<h1 class="section-header">Verify your .edu email</h1>
					<div class="credit-body">
						<div>
							<p>We won't share this with anyone.</p>
							<p ng-if='!user.school_email && !user.school_email_confirmed' class="semibold"><em>Must be your school .edu email.</em></p>
							<p ng-if='user.school_email && !user.school_email_confirmed'>
								<a class='semi-opaque semibold' ng-click='checkStatus()'>Check Status?</a>
							</p>
						</div>
					</div>
					<button id='launch-email-confirm-popup' ng-click='launchConfirmEmailPopup($event)' class="semibold bg-lake">Confirm Your Email</button>
				</div>
				<div ng-if='user.school_email_confirmed' class="bg-lake-50p">
					<h1 class="section-header">Your .edu email has been verified</h1>
					<div class="credit-body">
						<div>
							<p class="semibold"><strong>{{user.school_email}}</strong>
								<br/>is now confirmed!
								<p>We won't share this with anyone.</p>
						</div>
					</div>
				</div>
			</div>

			<!-- Experience Auth -->
			<div id="former-experience" class="credit-content-slide ng-class:{'active': activeTabIndex === 4}">
				<div ng-if='!user.guru_experiences || !user.guru_experiences.length'>
					<h1 class="section-header">Add Relevant Experience</h1>
					<div class="credit-body">
						<p>Relevant tutoring roles, jobs, etc</p>
					</div>
					<button class="btn-bold bg-shamrock" ng-click="launchAddGuruExperienceModal()">+ Add Item</button>
				</div>
				<div ng-if='user.guru_experiences && user.guru_experiences.length > 0'>
					<h1 class="section-header">Your Guru Experiences</h1>
					<ul class="credit-body list with-icon">
						<li ng-repeat='experience in user.guru_experiences | orderBy:"-id":true'>
							<a ng-click='launchAddGuruExperienceModal(experience)'>
								<span class="list-item-detail">
                                <h2>{{experience.name}}</h2>
                                <span>{{experience.years}} years</span>
								</span>
								<span class="list-item-icon">
                                <svg viewBox="0 0 100 100">
                                    <path d="M15.6243489,84.7923176 L19.5509642,73.6399994 L69.794924,23.3911161 L77.0255506,30.6217427 L26.7800007,80.8660212 L15.6243489,84.7923176 Z M13.3333333,87.0833333 L16.6666667,83.75 L13.3333333,87.0833333 L13.3333333,87.0833333 Z M70.8333333,23.75 L73.3350627,21.25 L70.8333333,23.75 L70.8333333,23.75 Z M76.6666667,29.5833333 L79.1666667,27.0833333 L76.6666667,29.5833333 L76.6666667,29.5833333 Z M82.5205606,25.5682252 L85.7479206,28.7955852 C85.7479206,28.7955852 67.7080166,46.8354927 67.5,47.0435059 M75.9393067,32.2348919 L79.1666667,35.4622519 M19.5499992,73.6399994 L26.7800007,80.8700027 L19.5499992,73.6399994 Z M77.7627936,15.0378071 L85.3792239,22.6542374 L81.0085605,27.0249008 L73.3921302,19.4084705 L77.7627936,15.0378071 Z"></path>
                                </svg>
                            </span>
							</a>
						</li>
					</ul>
					<button class="semibold bg-shamrock" ng-click="launchAddGuruExperienceModal()">Add Item</button>
				</div>
			</div>
		</div>
	</section>

	<input type='file' id='file-input-guru-add-transcript' onchange="angular.element(this).scope().file_changed_transcript(this)" style='display:none' />