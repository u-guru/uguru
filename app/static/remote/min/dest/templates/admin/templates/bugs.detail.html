<div class="full-xy">
	<ion-pane id="cta-modal-platforms-list" class="absolute full-xy hide-display cta-modal bg-charcoal z-index-10 hide" ng-include="root.base_url + 'admin/templates/bugs.states.html'"></ion-pane>

	<header class="bg-robin txt-center flex-center">
		<!-- <h1 class="txt-white weight-700 txt-28">Bug Detail</h1> -->
		<h1 class="txt-white weight-700 txt-28" ng-if="!isNewBug">{{selectedBug.title}}</h1>
		<input class="full-x flex-center-vertical p15x radius-2-right txt-18 semibold" style="height: 40px" ng-model="selectedBug.title" ng-if="isNewBug">

		<span class="block p15x-p10y bg-white txt-moxie radius-2 caps txt-18 semibold" ng-if="selectedBug.fix.fixedDate">Fixed {{selectedBug.fix.fixedDate}}</span>
		<a class="svg-white svg-36 svg-stroke-8 absolute top-0 right-0 close-icon m10xy" ng-if="!isEditMode && isNewBug" ng-click="closeBug()">
			<svg viewBox="0 0 100 100">
				<path d="M50,50 L50,14 L50,50 L14,50 L50,50 Z M50,50 L50,86 L50,50 L86,50 L50,50 Z"></path>
			</svg>
		</a>
	</header>
	<div class="bg-slate-50p" style="height: calc(100% - 58px)!important">
		<!-- <h1 class='p15xy bg-robin-80p txt-center txt-20 semibold' ng-if='!isNewBug' >{{selectedBug.title}}</h1> -->
		<!-- <input class="full-x flex-center-vertical p15x radius-2-right txt-18 semibold" style="height: 40px;"  ng-model='selectedBug.title' ng-if='isNewBug' ></input> -->

		<div class="full-x overflow-auto no-scrollbar">
			<ul class="p15-grid flex">
			<!-- 	<li>
					<a class="block" href="http://data.whicdn.com/images/64354977/original.jpg">
						<img class="block height-128" src="http://data.whicdn.com/images/64354977/original.jpg"/>
					</a>
				</li>
				<li>
					<img class="block height-128"  src="https://docs.google.com/uc?id=0BxJwaSrDlwyNSVBlVGhwXzlsWTg"/>
				</li>
				<li>
					<a href="https://www.flickr.com/photos/144837895@N04/27876082770" title="2016-04-12 17:49:41">
						<img class="block height-128" src="https://c3.staticflickr.com/8/7452/27876082770_95cd8662c8_b.jpg" >
					</a>																	
				</li> -->
				<li ng-repeat="shot in selectedBug.screenshot">
					<a ng-click="newTab(shot);">
						<img class="block height-128" ng-src="{{shot}}">
					</a>
				</li>

			<!-- 	<li>
					<img class="block height-128" src="http://data.whicdn.com/images/64354977/original.jpg"/>
				</li>
				<li>
					<img class="block height-128" src="http://data.whicdn.com/images/64354977/original.jpg"/>
				</li> -->
				
				<!-- <li ng-repeat='shot in selectedBug.screenshot'>
					<a src ='{{shot}}'>
						<img src ='{{shot}}'></img>
					</a>
				</li>
				<li>
					<img src='https://files.slack.com/files-pri/T052B7MCK-F12DF12TF/2016-04-20_15_29_24.png'></img>
				</li> -->
			<ul>
		</ul></ul></div>
		<div class="ugrid-2" style="height: calc(100% - 54px - 158px - 66px)">
			<ul class="bg-charcoal full-y overflow-auto p15-grid no-scrollbar">
				<li class="flex-stretch">
					<span class="block bg-rocket p10y-p15x radius-2-left txt-18 semibold">server</span>
					<span class="block bg-slate p10y-p15x radius-2-right txt-18 semibold full-x txt-white" ng-if="!isEditMode && !isNewBug">{{selectedBug.serverg}}</span>
					<input class="full-x p10y-p15x radius-2-right txt-18 semibold" ng-model="selectedBug.step" ng-if="isEditMode || isNewBug">

				</li>
				<li class="flex-stretch">
					<span class="block bg-rocket p10y-p15x radius-2-left txt-18 semibold">step</span>
					<span class="block bg-slate p10y-p15x radius-2-right txt-18 semibold full-x txt-white" ng-if="!isEditMode && !isNewBug">{{selectedBug.step}}</span>
					<input class="full-x p10y-p15x radius-2-right txt-18 semibold" ng-model="selectedBug.step" ng-if="isEditMode || isNewBug">

				</li>
				<li class="flex-stretch">
					<span class="block bg-rocket p10y-p15x radius-2-left txt-18 semibold">error&nbsp;msg</span>
					<ul>
					<li class="block bg-slate p10y-p15x radius-2-right txt-18 semibold full-x txt-white" ng-repeat="msg in selectedBug.errMessage">{{msg}}</li>
					</ul>
				</li>
				<li class="flex-stretch">
					<span class="block bg-rocket p10y-p15x radius-2-left txt-18 semibold">notes</span>
					<span class="block bg-slate p10y-p15x radius-2-right txt-18 semibold full-x txt-white" ng-if="!isEditMode && !isNewBug">{{selectedBug.notes}}</span>
					<textarea class="full-x p10y-p15x radius-2-right txt-18 semibold" ng-model="selectedBug.notes" ng-if="isEditMode || isNewBug"></textarea>
				</li>
				<li class="flex-stretch">
					<span class="block bg-rocket p10y-p15x radius-2-left txt-18 semibold">rank</span>
					<span class="block bg-slate p10y-p15x radius-2-right txt-18 semibold full-x txt-white" ng-if="!isEditMode && !isNewBug">{{selectedBug.rank}}</span>
					<input type="number" min="0" class="full-x flex-center-vertical p15x radius-2-right txt-18 semibold" style="height: 40px" ng-model="selectedBug.rank" ng-if="isEditMode || isNewBug">
				</li>
				<li class="flex-stretch">
					<span class="block bg-rocket p10y-p15x radius-2-left txt-18 semibold">element</span>
					<span class="block bg-slate p10y-p15x radius-2-right txt-18 semibold full-x txt-white" ng-if="!isEditMode && !isNewBug">{{selectedBug.element}}</span>
					<input class="full-x flex-center-vertical p15x radius-2-right txt-18 semibold" style="height: 40px" ng-model="selectedBug.element" ng-if="isEditMode || isNewBug">
				</li>
				<li class="flex-stretch-space-between">
					<span class="block bg-rocket p10y-p15x txt-18 semibold" ng-class="{'radius-2-left': !isEditMode, 'radius-2': isEditMode}">priority</span>
					<span class="block bg-slate p10y-p15x radius-2-right txt-18 semibold full-x txt-white" ng-if="!isEditMode && !isNewBug">{{selectedBug.priority}}</span>
					<div class="toggle" style="margin-top: 2px" ng-if="isEditMode || isNewBug">
						<input type="checkbox" ng-model="selectedBug.priority">
						<label>
							<svg class="square" viewBox="0 0 100 100">
								<rect x="0" y="0" width="100" height="100"></rect>
							</svg>
							<svg class="square" viewBox="0 0 100 100">
								<rect x="0" y="0" width="100" height="100"></rect>
							</svg>
							<span></span>
						</label>
					</div>
				</li>
				<li class="flex-stretch">
					<span class="block bg-rocket p10y-p15x radius-2-left txt-18 semibold">difficulty</span>
					<span class="block bg-slate p10y-p15x radius-2-right txt-18 semibold full-x txt-white" ng-if="!isEditMode && !isNewBug">{{selectedBug.difficulty}}</span>
					<div ng-if="isEditMode || isNewBug">
						<span>[low to high]</span>
						<a ng-repeat="i in [0,1,2,3,4,5,6,7,8,9,10]" ng-click="selectedBug.difficulty = i">
							<span>{{i}}</span>
						</a>
					</div>

				</li>

<!-- 				<li class="flex-stretch">
					<span class="block bg-rocket p10y-p15x radius-2-left txt-18 semibold">impact&nbsp;file</span>
					<span class="block bg-slate p10y-p15x radius-2-right txt-18 semibold full-x txt-white">{{selectedBug.impact_file}}</span>
				</li> -->
				<li class="flex-stretch">

					<span class="block bg-rocket p10y-p15x txt-18 semibold" ng-class="{'radius-2-left': !isEditMode, 'radius-2': isEditMode}">Speed</span>
					<span class="block bg-slate p10y-p15x radius-2-right txt-18 semibold full-x txt-white" ng-if="!isEditMode && !isNewBug">{{selectedBug.speed}}
					</span>
				</li>
				<li class="flex-stretch">
					<span class="block bg-rocket p10y-p15x radius-2-left txt-18 semibold">file&nbsp;names</span>
					<span class="block bg-slate p10y-p15x radius-2-right txt-18 semibold full-x txt-white" ng-if="!isEditMode && !isNewBug">{{selectedBug.file_names}}</span>
					<input class="full-x flex-center-vertical p15x radius-2-right txt-18 semibold" style="height: 40px" ng-model="selectedBug.file_names" ng-if="isEditMode || isNewBug">
				</li>

				<li class="flex-stretch">
					<span class="block bg-rocket p10y-p15x radius-2-left txt-18 semibold">file&nbsp;type</span>
					<span class="block bg-slate p10y-p15x radius-2-right txt-18 semibold full-x txt-white" ng-if="!isEditMode && !isNewBug">{{selectedBug.file_type}}</span>
					<input class="full-x flex-center-vertical p15x radius-2-right txt-18 semibold" style="height: 40px" ng-model="selectedBug.file_type" ng-if="isEditMode || isNewBug">
				</li>
			</ul>
			<div class="full-y bg-slate overflow-auto no-scrollbar">
				<div class="tag-list" ng-if="false">
					<h1 class="p15x-p15top semibold">Impact Files :</h1>
					<ul>
						<li ng-repeat="file in selectedBug.impact_file" ng-if="!isEditMode && !isNewBug">
							<a class="chip bg bg-robin">
								<span>&times;&nbsp;&nbsp;</span>
								<span>{{file}}</span>
							</a>
						</li>
						<li>
							<input ng-if="isEditMode || isNewBug" tabindex="1" class="chip tag-add" ng-model="advanceSearch.tags.empty_tag.content" ng-blur="advanceSearch.tags.add(advanceSearch.tags.empty_tag.content)" ng-keyup="($event.keyCode == 13 || $event.keyCode == 9) && advanceSearch.tags.add(advanceSearch.tags.empty_tag.content)" placeholder="+ add a tag" size="{{advanceSearch.tags.empty_tag.content.length || 10}}">
						</li>
					</ul>
				</div>

				<h1 class="p15x-p15top semibold">Platforms :</h1>
				<div class="tag-list">
					<ul>
						<li ng-repeat="platform in selectedBug.platforms" class="full-x mtop20" style="width:calc(100%/8) !important" ng-if="platform.isPassed != 0">
						    <div class="checkbox-container {{platform.test_status || 'unsure'}}" style="width: auto !important">
						        <div class="relative full-x text-center flex-wrap-center">
						            <!-- <input type="checkbox" id="checkbox-item"/> -->
						            <input type="checkbox" ng-true-value="1" ng-false-value="-1" ng-checked="checkbox == -1" ng-model="platform.isPassed" ng-change="updateStatus()" disabled="disabled">
						            <span>
						                <svg viewBox="0 0 100 100">
						                    <!-- <path d="M14,50 L86,50"></path> -->
						                    <path d="M14,0 L86,75"></path>
						                    <path d="M14,75 L86,0"></path>

						                </svg>
						                <svg viewBox="0 0 100 100">
						                    <path d="M14,54.2352941 L35.1764706,75.4117647 L86,24.5882353"></path>
						                </svg>
						            </span>
						            <div class="text-5 txt-white full-x uppercase weight-600 p05xy" style="font-size:14px; margin-left:-7px">
						                {{platform.name}}<br>{{platform.device}}<br>{{platform.screenSize[0]}}
						            </div>
						           <!--  <div class='opacity-50 full-x uppercase weight-600 p05xy' style='font-size:10px; margin-left:-7px;'>
						                status: {{platform.isPassed}}
						            </div> -->
						        </div>
						    </div>
						</li>
						<li>
							<a ng-if="isEditMode || isNewBug" ng-click="addPlatforms(selectedBug.platforms)">+ Add More Platforms</a>
						</li>
						<!-- <li ng-repeat="platform in selectedBug.platforms">
							<a class="chip bg bg-robin">
								<span ng-if='isEditMode' ng-click='removePlatform($index)'>&times;&nbsp;&nbsp;</span>
								<span>{{platform.name}} </span>
								<span> {{platform.device}} {{platform.screenSize}} </span>
							</a>
						</li>
						<li>
							<input ng-if='isEditMode' tabindex="1" class='chip tag-add' ng-model='empty_platform' ng-blur='empty_platform = addNewPlatform(empty_platform)'  ng-keyup="($event.keyCode == 13 || $event.keyCode == 9)&& (empty_platform = addNewPlatform(empty_platform))" placeholder="+ add a tag" size="{{empty_platform.length || 10}}">
						</li> -->
					</ul>
				</div>

				<h1 class="p15x-p15top semibold">Tags :</h1>
				<div class="tag-list">
					<ul>
						<li ng-repeat="tag in selectedBug.tags">
							<a class="chip bg bg-robin">
								<span ng-click="removeTag($index)">&times;&nbsp;&nbsp;</span>
								<span>{{tag}}</span>
							</a>
						</li>
						<li>
							<input tabindex="1" class="chip tag-add" ng-model="empty_tag" ng-blur="empty_tag = addNewTag(empty_tag)" ng-keyup="($event.keyCode == 13 || $event.keyCode == 9)&& (empty_tag = addNewTag(empty_tag))" placeholder="+ add a tag" size="{{empty_tag.length || 10}}">
						</li>
					</ul>
				</div>
				<div class="error bg-crimson m15x p10y-p15x radius-2 txt-white semibold txt-18 hide" ng-class="{'show': error_msg}">{{error_msg}}</div>
			<!-- 	<h1 class="p15x-p15top semibold">environment :</h1>
				<div>
					<ul>
						<li ng-repeat="envir in selectedBug.envir">
							{{envir.name}} {{envir.isPassed}}
							<label>{{envir.device}}-{{envir.screenSize[0]}}</label>
							<input style='height: 10px;width: 10px'type='checkbox'></input>
						</li>
					</ul>
				</div> -->
			</div>
		</div>
		<!--This is Manuel Bug Tool Bar -->
		<div class="flex-space-between">
			<!-- {{isSync}} {{isEditMode}} {{isNewBug}}  -->
			<ul class="p15-grid flex">
				<li>		
					<button class="bg-moxie radius-2 height-36 txt-18" ng-click="editMode()" ng-if="fileManul && !isEditMode && !isNewBug">Edit Bug</button>	
				</li>
				<li>
					<button class="bg-moxie radius-2 height-36 txt-18" ng-click="saveBug();editMode();" ng-if="fileManul &&  isEditMode && !isNewBug">Update Bug</button>
				</li>
				<li>
					<button class="bg-moxie radius-2 height-36 txt-18" ng-click="fileManualBug()" ng-if="fileManul && isNewBug"> Save Bug</button>
				</li>

				<li>
					<button class="bg-moxie radius-2 height-36 txt-18" ng-click="removeBug(current.index,currentManualBugs)" ng-if="fileManul && !isEditMode && !isNewBug"> Remove Bug</button>
				</li>

				<li>
					<button class="bg-moxie radius-2 height-36 txt-18" ng-click="closeBug()">Close</button>
				</li>

			

			<!-- 	<li>
			
					<button class="bg-moxie radius-2 height-36 txt-18" ng-click='editMode()' ng-if='!isEditMode'>Edit Bug</button>
					
				</li>
				<li>
					<button class="bg-moxie radius-2 height-36 txt-18" ng-click='saveBug()' ng-if='!isSync || isEditMode && !isNewBug'>Update Bug</button>
				</li>

				<li>
					<button class="bg-moxie radius-2 height-36 txt-18" ng-click='reviseBug()' ng-if='isEditMode'>Undo Bug</button>
				</li>
				<li>
					<button class="bg-moxie radius-2 height-36 txt-18" ng-if='!selectedBug.fix.isFixed' ng-click='fixBug()'>Fixed !</button>
				</li>
				<li>
					<button class="bg-moxie radius-2 height-36 txt-18" ng-if='selectedBug.fix.isFixed' ng-click='unfixBug()'>JK! it is not fixed yet :P </button>

				</li>
				<li>
					<button class="bg-moxie radius-2 height-36 txt-18" ng-click='removeBug(selectedBug.index)'>Remove Bug </button>
				</li> -->

			</ul>
			<ul class="p15-grid flex" ng-if="false">

				<li ng-if="current.index != 0 && !isEditMode">
					<button class="bg-robin radius-2 height-36 txt-18" ng-click="preBug()" ng-if="current.index != 0">
						Previous Bugs
					</button>

				</li>
				<li ng-if="false">
					<button class="bg-robin radius-2 height-36 txt-18" ng-click="preStateBug()">
						Previous State Bugs
					</button>
				</li>
				<li>
					<button class="bg-robin radius-2 height-36 txt-18" ng-click="saveBug();closeBug();" ng-if="isEditMode && !isNewBug">Save & Close</button>
				</li>
				<li>
					<button class="bg-moxie radius-2 height-36 txt-18" ng-click="addBug();" ng-if="isEditMode && isNewBug && selectedBug.title">Report Bug</button>
				</li>
				<li ng-if="selectedBug.index < stepBugs.length-1 && !isEditMode">
					<button class="bg-robin radius-2 height-36 txt-18" ng-click="nextBug()">Next Bugs</button>
				</li>

			</ul>
		</div>
	</div>
</div>