<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=1"/>    
        <meta name="google-site-verification" content="VedYsRZwfb8cgFav7a8007dC1zMR-vjIKoqBH1Fv9N4" />
        <link href="/static/css/bootstrap.css" rel="stylesheet">
        <link href="/static/css/app.css" rel="stylesheet">
        <link href="/static/css/phone-mobile.css" rel="stylesheet">
        <link href="/static/css/tablet-mobile.css" rel="stylesheet">
        <link href='http://fonts.googleapis.com/css?family=Roboto:300, 400,700' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=Roboto+Condensed:700,400,300, 100' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=Grand+Hotel' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="//code.jquery.com/ui/1.11.0/themes/smoothness/jquery-ui.css">

        <!-- Include scripts -->
        {% include 'scripts.html' %}
        {% block scripts %}
        {% endblock %}

    </head>
    <body>
        <nav class="navbar navbar-default navbar-main" role="navigation" style='height:65px'>
          <div class="container-fluid">
            <!-- Logo and toggle get grouped for better mobile display -->
            <div class="navbar-header navbar-app navbar-sproul">
              <!-- <button type="button" id='mobile-nav-button'class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button> -->
              <a class="navbar-brand" href="{% if session.get('admin') %} /logout/ {% else %}../../{%endif%}">
                <!-- <img src='/static/img/guru-new.svg' height='60px'> -->
                <span id='base-logo-text' class='logo-text blue-text'> &nbsp;uguru.me </span>
              </a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            </div><!-- /.navbar-collapse -->
          </div><!-- /.container-fluid -->
        </nav>
        <div id='login-modal-container' class='container-fluid center sproul-signup-container'>
            <h1 id='become-guru-text' style='margin-top:-10px; margin-bottom:30px'> Signup </h1>
            <div id='alert-fields-student-signup-top'>
                Please fill in all fields.
            </div>
            <div class='login-input-container' id='sproul-signup-container'>
                <div id='alert-fields-student-signup'>
                    Please fill in all fields.
                </div>
                <label for="exampleInputPassword1">Name</label>
                <input name='student-name' placeholder='Full Name'  id='student-signup-name' class="form-control">
                
                <label style='margin-top:10px' for="exampleInputEmail1">Email address</label>
                <input name='student-email' placeholder='you@berkeley.edu' id='student-signup-email'  type="email" class="form-control">
                
                <label style='margin-top:10px' for="exampleInputPassword1">Create a Password</label>
                <input name='student-password' placeholder='••••••••' id='student-signup-password' type="password" class="form-control" >

                <label style='margin-top:10px' for="exampleInputPassword1">Referral Code<span class='light-grey-text'> (Optional) </span></label>
                <input name='student-password' id='student-signup-referral' class="form-control" >

                <div class="checkbox" style='display:none'>
                    <label>
                      <input id='sproul-guru-signup' type="checkbox"> I want to be a Guru
                    </label>
                </div>
            </div>
            <div class='login-btn-container relative' >
                <a class='student-next-link-instant' href='javascript:void(0);'style='display:block'>
                    <span class='blue-btn signup-padding'>
                        <span style='top:3px' class='glyphicon glyphicon-user absolute'></span>  
                        <span style='margin-left:25px;' >Get an Account</span>
                    </span>
                </a>
                <div id='post-signup-span' style ='display:none'class='row green-text font-24'>
                    <span id='post-signup-span-awesome'>
                    <span class='green-text glyphicon glyphicon-ok'> </span> You're all set! (and Awesome!)
                    </span>
                     <br>
                    <span id='post-signup-span-thankyou'class='reg-text font-14'> Thank You for Signing Up! :) </span>
                </div>
            </div>
        </div>
    </body>
    <footer>
      <script>window.jQuery || document.write('<script src="/static/js/jquery-1.11.1.min.js"><\/script>')</script>
        <script src="/static/js/bootstrap.min.js"></script>
        <script src="/static/js/typeahead.js"></script>
        <script src="//code.jquery.com/ui/1.11.0/jquery-ui.js"></script>
        <script src="/static/js/snippets/calendar.js"></script>
        <script src="/static/js/snippets/scroll.js"></script>
        <script src="/static/js/mobile.js"></script>
        <script>
        $('#become-guru-nav').click(function() {
          $('#signup-modal').modal();
          $('#tutor-next-link-instant').show();
          $('#student-next-link').hide();
          $('#become-guru-text').show();
        });
        {% if modal_flag == 'login' %}
            $('#login-modal').modal('show');
        {% elif modal_flag == 'signup'%}
            $('#signup-modal').modal();
          $('#tutor-next-link').hide();
          $('#student-next-link').show();
        {% elif modal_flag == 'guru'%}  
            $('#signup-modal').modal();
            $('#student-next-link').hide();
            $('#tutor-next-link').show();
        {% elif modal_flag == 'instant'%}  
            $('#fb-signup-btn').hide();
            $('.never-post').hide();
            $('.or-text').hide();
            $('.student-next-link-instant').click(function() {
                if (!$('#student-signup-name').val() || !$('#student-signup-email').val() 
                || !$('#student-signup-password').val()) 
                {
                    $('#alert-fields-student-signup').show()
                } else {
                    var data_dict = {
                        'student-signup': true,        
                        'name': $('input[name="student-name"]').val(),
                        'email': $('input[name="student-email"]').val(),
                        'phone': '',
                        'password': $('input[name="student-password"]').val(),
                        'instant': true
                    }
                    if ($('#sproul-guru-signup:checked').length > 0) {
                        data_dict['tutor-signup'] = true;
                    }

                    if ($('#student-signup-referral').val()) {
                        data_dict['sproul-intern-referral'] = $('#student-signup-referral').val();
                    }
                    $.ajax({
                      type: "POST",
                      contentType: 'application/json;charset=UTF-8',
                      url: '/validation/' ,
                      data: JSON.stringify(data_dict), 
                      dataType: "json",
                      success: function(result) {
                        if (result.dict['account-exists']) {
                          $('#signup-modal').modal('hide');
                          $('#login-modal').modal('show');
                          $('#alert-fields-login').text($('#student-signup-email').val() + ' already has an account! Please log in.')
                          $('#alert-fields-login').show();
                          return;
                        }

                        if (request_form_complete) {
                          submit_request_form_to_server();
                        }

                        if (!$('#request-skill').val()) {
                          $('.student-next-link-instant').hide();
                          $('input[name="student-name"]').val('');
                          $('input[name="student-email"]').val('');
                          $('input[name="student-password"]').val('');
                          $('#sproul-guru-signup').prop('checked', false);
                          $('input[name="student-name"]').css('border-color','grey');
                          $('input[name="student-email"]').css('border-color','grey');
                          $('input[name="student-password"]').css('border-color','grey');
                          $('#post-signup-span').show();
                          $('#post-signup-span').delay(2500).fadeOut('slow', function() {
                            $('.student-next-link-instant').show();
                          });
                          return;
                        }
                        // $('#signup-modal').modal('hide');
                        // $('#main').hide();
                        // $('#request-form').show();
                      }
                    });
                } 
            });
            
            $('#tutor-next-link-instant').click(function(){
                   if (!$('#student-signup-name').val() || !$('#student-signup-email').val() 
                    || !$('#student-signup-password').val()) 
                    {
                        $('#alert-fields-student-signup').show()
                    } else if ($('#student-signup-email').val().toLowerCase().indexOf('@berkeley.edu') == -1) {
                        $('#alert-fields-student-signup').text('Please enter an @berkeley.edu address.');
                        $('#alert-fields-student-signup').show()
                    } else {
                        var data_dict = {
                            'student-signup': true,
                            'tutor-signup': true,
                            'name': $('input[name="student-name"]').val(),
                            'email': $('input[name="student-email"]').val(),
                            'phone': '',
                            'password': $('input[name="student-password"]').val(),
                            'instant': true
                        }
                        $.ajax({
                          type: "POST",
                          contentType: 'application/json;charset=UTF-8',
                          url: '/validation/' ,
                          data: JSON.stringify(data_dict), 
                          dataType: "json",
                          success: function(result) {
                            if (result.dict['account-exists']) {
                              guru_signup_clicked = true;
                              $('#signup-modal').modal('hide');
                              $('#login-modal').modal('show');
                              $('#alert-fields-login').text($('#student-signup-email').val() + ' already has an account! Please Log In.')
                              $('#alert-fields-login').show();
                              return;
                            }
                            $('#tutor-next-link-instant').hide();
                              $('input[name="student-name"]').val('');
                              $('input[name="student-email"]').val('');
                              $('input[name="student-password"]').val('');
                              $('input[name="student-name"]').css('border-color','grey');
                              $('input[name="student-email"]').css('border-color','grey');
                              $('input[name="student-password"]').css('border-color','grey');
                              $('#post-signup-span').show();
                              $('#post-signup-span').delay(2500).fadeOut('slow', function() {
                                $('#tutor-next-link-instant').show();
                              });
                          }
                        });
                    }
                });
        {% else %} 
            $('#become-guru-nav').click(function() {
                $('#signup-modal').modal();
                $('#tutor-next-link').show();
                $('#tutor-next-link-instant').hide();
                $('#student-next-link').hide();
                $('#become-guru-text').show();
            });
        {% endif %}
        </script>
    </footer>
</html>
