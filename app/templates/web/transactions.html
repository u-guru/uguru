{% extends 'web/base.html' %}
{% set user_transactions = user.get_all_transactions() %}

    {% block main_header %}
    <header class="bar bar-nav">
      <h1 class="title">Transactions</h1>
      <a class="icon icon-left-nav pull-left" href="/m/settings/" data-transition="slide-out"></a>
    </header>
    {% endblock %}

    {% block main_content %}
    <div class="content should-hide-tab-bar should-hide-message-bar">
      
      <ul class="table-view">
        
        {% for transaction in user_transactions %}

          {% if transaction['type'] == 'student' %}
            
            <li class="table-view-cell message-cell media">
              <div class="media-object message-face pull-left" style='background-image: url("{{transaction['guru']['profile_url']}}")'></div>
              <div class="media-body">
                  {{transaction['guru']['name']}} helped you in CS10
              </div>
              <span class='pull-right red-text bold'> -${{transaction['amount']|round}} </span>
              <p>
                {{transaction['time']}}
              </p>
            </li>

          {% endif %}

          {% if transaction['type'] == 'guru' %}
            
            <li class="table-view-cell message-cell media">
              <div class="media-object message-face pull-left" style='background-image: url("{{transaction['student']['profile_url']}}")'></div>
              <div class="media-body">
                  You helped {{transaction['student']['name']}} in CS10
              </div>
              <span class='pull-right green-text bold'> +${{transaction['amount']|int}} </span>
              <p>
                {{transaction['time']}}
              </p>
            </li>

          {% endif %}
          {% if transaction['type'] == 'cashout' %}
            
            <li class="table-view-cell message-cell media">
              <div class="media-object message-face pull-left" style='background-image: url("{{user.as_dict()['profile_url']}}")'></div>
              <div class="media-body">
                  You cashed out
              </div>
              <span class='pull-right green-text bold'> +${{transaction['amount']|int}} </span>
              <p>
                {{transaction['time']}}
              </p>
            </li>

          {% endif %}
        {% endfor %}

      </ul>
      
    </div>
  
  {% endblock %}

    
