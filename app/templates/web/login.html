{% extends 'web/base.html' %}

{% block main_header %}
<header class="bar bar-nav">
    <a class="btn btn-link pull-right" data-transition='slide-in' href="#" id="submit-link">
        <strong>Submit</strong>
    </a>
    <h1 class="title">uGuru Login</h1>
</header>
{% endblock %}

{% block main_content %}
<div class="content">

    <form class="input-group" id="login-form">
        <input type="email" id="email-field" placeholder="Your School Email"></input>
        <input type="password" id="password-field" placeholder="Password"></input>
    </form>

</div>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script>

$(document).ready(function() {
    $('#submit-link').on('touchstart', function(){

        payload = JSON.stringify({ 
            email:$('#email-field').val(), 
            password:$('#password-field').val() 
        });

        $.ajax({
            url: '/api/v1/login',
            type: 'POST',
            contentType: 'application/json',
            data: payload,
            success: function(request){
                window.PUSH({
                    transition : "slide-in",
                    url : "/home/"
                });
            },
            error: function (request) {
                alert(request.responseJSON['errors']);
            }
        });
    });
});

</script>

{{show_components(show_request_modal=True, show_tab_bar=True, student_mode=True, page_name='login')}}
{% include 'web/snippets/import_fingerblast.html' %}
{% endblock %}