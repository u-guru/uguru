{% extends 'web/components/base.html' %}

{% block title_text %}
Uguru Home Page
{% endblock %}

{% block header_scripts %}
<link rel="stylesheet" href="/static/css/sass/student.home.css">
<link rel="stylesheet" href="/static/css/web/lib/animate.min.css">
<link rel="stylesheet" href="/static/css/sass/mobile.css">
{% endblock %}

{% block content %}



{% include 'web/components/header.html' %}
<div class='page-wrapper' id='student-home-page'>


<div class="splash-container university">
    <div class='flex-container-center full-area'>
        <div class='main-container padding-1em'>
            <h1 class='main-header-home'>
                Get instant
                <span id='course-header-wrapper'class='changing-header'><span id='course-header-text'>CS10</span></span>
                help at <span class='changing-header header-university'><span id='university-header-text'>Berkeley</span></span>
            </h1>
            <h3 class='main-subheader-home'>
                Peers helping peers for <strong>FREE</strong>, trade, or a little side cash.
            </h3>

            <div id='flex-item-c' class='pure-g-c'>
                <div class='flex-item-c'>
                    <div class='pure-u-1 pure-u-sm-4-5 pure-u-md-3-5 padding-1em padding-bottom-2em'>
                        <div class='pure-g home-search-wrapper'>
                                <div class='pure-u-2-3 pure-sm-3-5 pure-u-md-4-5'>
                                    <div class='university-input-typeahead-wrapper'>
                                        <input class='typeahead' id='typeahead-input-1' type="text" placeholder="Enter your university" autofocus>
                                    </div>
                                </div>
                                <div class='pure-u-1-3 pure-sm-2-5 pure-u-md-1-5'>
                                    <a class="pure-button search-button" href="#">Search</a>
                                </div>
                        </div>
                    </div>
                </div>
                <div class='flex-item-c'>
                    <div class='app-icons-horizontal opacity-3-4'>
                        <a href='/hybrid-app/' class='apple-link' target='_blank'>
                            <img class='img-pure' src='/static/img/apple_app_store.svg'/>
                        </a>
                        <a class='android-link' href='/hybrid-app/' target='_blank'>
                            <img class='img-pure' src='/static/img/android_play.png'/>
                        </a>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>


<!-- <div class="pure-g university">
    <div class="pure-u-1 relative-container">
        <img src='/static/img/banner-close.svg' class='absolute absolute-right close-banner padding'/>
        Want a flexible Part-Time College Job?
        <button class='button button-pure'>Become a Guru</button>
    </div>
</div> -->


<div class="content stat-container-wrapper">
        <div class="stat-container">
            <div class="stats pure-g">
                <div class="pure-u-1-2 stat pure-u-sm-1-2 pure-u-md-1-4 pure-u-lg-1-4">
                    <div class="padding-1em inner-stat flex-container">
                        <img class="pure-img" src="/static/img/campus-stat.svg"/>
                        </img>
                        <h1>1000+</h1>
                        <p>Supported Schools</p>
                    </div>
                </div>
                <div class="pure-u-1-2 stat pure-u-sm-1-2 pure-u-md-1-4 pure-u-lg-1-4">
                    <div class="padding-1em inner-stat">
                        <img class="pure-img" src="/static/img/dept-stat.svg"/>
                        <h1 data-attr-num='652487'>50k+</h1>
                        <p>Courses Covered</p>
                    </div>
                </div>
                <div class="pure-u-1-2 stat pure-u-sm-1-2 pure-u-md-1-4 pure-u-lg-1-4">

                    <div class="padding-1em inner-stat">
                        <img class="pure-img" src="/static/img/courses-stat.svg"/>
                        <h1 data-attr-num='652487' >650k+</h1>
                        <p>Professors Searchable</p>
                    </div>

                </div>
                <div class="pure-u-1-2 stat pure-u-sm-1-2 pure-u-md-1-4 pure-u-lg-1-4">

                    <div class="padding-1em inner-stat">
                        <img class="pure-img" src="/static/img/star-stat.svg"/>
                        <h1>4.8+</h1>
                        <p>Avg Quality Rating</p>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <div class="student-value-prop content">
        <div class="pure-g row-1">
            <div class="pure-u-1 pure-u-sm-1-2 pure-u-md-1-2 flex-container" id="student-value-prop-1">
                <div class="flex-item hide-mobile">

                </div>
                <div class="flex-item padding-1em pure-img-container">
                    <h2>
                        Affordable academic help <br>
                        at your fingertips
                    </h2>
                    <h5>
                        Sessions with your perfect tutor from $3 every 15 min.
                    </h5>
                    <img src="/static/img/phone1.png"/ class="pure-img">
                </div>
                <div class="flex-item pure-u-0">
                </div>
                <div class="flex-item pure-u-0">
                </div>
                <div class="flex-item pure-u-0">
                </div>
                <div class="flex-item pure-u-0 hide-mobile">
                </div>
            </div>
            <div class="pure-u-1 pure-u-sm-1-2 pure-u-md-1-2 flex-container" id="student-value-prop-2">
                <div class="flex-item">

                </div>
                <div class="flex-item padding-1em pure-img-container">
                    <h2>
                        Uguru is open 24/7
                    </h2>
                    <h5>
                        No more last second freakouts the night before. <br>
                        Book a Guru this minute, or some time later this week.
                    </h5>
                    <img src="/static/img/phone2.png" class="pure-img"/>
                </div>
                <div class="flex-item pure-u-0">
                </div>
                <div class="flex-item pure-u-0">
                </div>
                <div class="flex-item pure-u-0">
                </div>
            </div>
        </div>
    </div>
    <div class="student-value-prop content">
        <div class="pure-g row-2">
            <div class="pure-u-1 pure-u-sm-1-2 pure-u-md-1-2 flex-container" id="student-value-prop-3">
                <div class="flex-item padding-1em">
                    <h2>
                        Your Guru has aced <br> the same exact class
                    </h2>
                    <h5>
                        Maybe even had the same professor.
                    </h5>
                    <img src="/static/img/phone3.png" class="pure-img"/>
                </div>
                <div class="flex-item padding-1em pure-u-0">
                </div>
                <div class="flex-item padding-1em pure-u-0">
                </div>
            </div>
            <div class="pure-u-1 pure-u-sm-1-2 pure-u-md-1-2 flex-container" id="student-value-prop-4">

                <div class="flex-item padding-1em">
                    <h2>
                        Safe and cashless checkout
                    </h2>
                    <h5>
                        Finish your session and get back to <br>
                        your life, not the ATM.
                    </h5>
                    <img src="/static/img/phone4.png" class="pure-img">
                </div>

                <div class="flex-item padding-1em pure-u-0">
                </div>
                <div class="flex-item padding-1em pure-u-0">
                </div>

            </div>
        </div>
    </div>

    <div class="content popular-course-wrapper">


            <div class="banner pure-g university-popular-courses">

                <div class="pure-u-1">
                    <div class="padding-1em">
                        <h4> We have Gurus in several departments</h4>
                    </div>
                </div>

            </div>

            <div class="pure-g course-row">


                <div class="pure-u-1-3 pure-u-sm-1-4 pure-u-md-1-6 popular-course">
                    <div class="padding-1em flex-container-center">
                        <h4>{{departments[0]}}</h4>
                    </div>
                </div>

                <div class="pure-u-1-3 pure-u-sm-1-4 pure-u-md-1-6 popular-course">
                    <div class="padding-1em flex-container-center">
                        <h4>{{departments[1]}}</h4>
                    </div>
                </div>

                <div class="pure-u-1-3 pure-u-sm-1-4 pure-u-md-1-6 popular-course">
                    <div class="padding-1em flex-container-center">
                        <h4>{{departments[2]}}</h4>
                    </div>
                </div>

                <div class="pure-u-1-3 pure-u-sm-1-4 pure-u-md-1-6 popular-course">
                    <div class="padding-1em flex-container-center">
                        <h4>{{departments[3]}}</h4>
                    </div>
                </div>

                <div class="pure-u-1-3 pure-u-sm-1-2 pure-u-md-1-6 popular-course">
                    <div class="padding-1em flex-container-center">
                        <h4>{{departments[4]}}</h4>
                    </div>
                </div>

                <div class="pure-u-1-3 pure-u-sm-1-2 pure-u-md-1-6 popular-course">
                    <div class="padding-1em flex-container-center">
                        <h4>{{departments[5]}}</h4>
                    </div>
                </div>

            </div>

            <div class="pure-g course-row-2">
                <div class="pure-u-1-3 pure-u-sm-1-4 pure-u-md-1-6 popular-course">
                    <div class="padding-1em flex-container-center">
                        <h4>{{departments[6]}}</h4>
                    </div>
                </div>
                <div class="pure-u-1-3 pure-u-sm-1-4 pure-u-md-1-6 popular-course">
                    <div class="padding-1em flex-container-center">
                        <h4>{{departments[7]}}</h4>
                    </div>
                </div>
                <div class="pure-u-1-3 pure-u-sm-1-4 pure-u-md-1-6 popular-course">
                    <div class="padding-1em flex-container-center">
                        <h4>{{departments[8]}}</h4>
                    </div>
                </div>
                <div class="pure-u-1-3 pure-u-sm-1-4 pure-u-md-1-6 popular-course">
                    <div class="padding-1em flex-container-center">
                        <h4>{{departments[9]}}</h4>
                    </div>
                </div>
                <div class="pure-u-1-3 pure-u-sm-1-2 pure-u-md-1-6 popular-course">
                    <div class="padding-1em flex-container-center">
                        <h4>{{departments[10]}}</h4>
                    </div>
                </div>
                <div class="pure-u-1-3 pure-u-sm-1-2 pure-u-md-1-6 popular-course">
                    <div class="padding-1em flex-container-center">
                        <h4>{{departments[11]}}</h4>
                    </div>
                </div>
            </div>

    </div>
    <div class="content">
        <div class="pure-g available-now-banner" id="get-started-university">
            <div class="pure-u-1 center">
                <h1>Search your university to learn more</h1>
                <h3 class='opacity-50'> Uguru is most likely already there!</h3>
                <div id='flex-item-c' class='pure-g-c'>
                    <div class='flex-item-c' style="margin-top:1em;">
                        <div class='pure-u-4-5 pure-u-sm-4-5 pure-u-md-3-5 padding-1em padding-bottom-2em home-search-wrapper-wrapper'>
                            <div class='pure-g home-search-wrapper' id='home-search-wrapper-footer'>
                                <div class='pure-u-3-5 pure-u-sm-4-5 pure-u-md-4-5'>
                                    <div class='university-input-typeahead-wrapper'>
                                        <input class='typeahead' type="text" id='typeahead-input-2' placeholder="Enter your university" autofocus>
                                    </div>
                                </div>
                                <div class='pure-u-2-5 pure-u-sm-4-5 pure-u-md-1-5'>
                                    <a class="pure-button search-button" href="#" id='search-button-2'>Search</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class='flex-item-c' style="margin-top:1em;">
                        <div class='app-icons-horizontal opacity-3-4'>
                            <a href='/hybrid-app/' class='apple-link' target='_blank'>
                                <img class='img-pure' src='/static/img/apple_app_store.svg'/>
                            </a>
                            <a class='android-link' href='/hybrid-app/' target='_blank'>
                                <img class='img-pure' src='/static/img/android_play.png'/>
                            </a>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
    {% include 'web/components/footer.html' %}
{% endblock %}


{% block footer_scripts %}
    <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
    <script src="/static/js/web/lib/typeahead.min.js"></script>

    <script src="/static/js/web/sidebar.js"></script>
    <script src="/static/js/web/lib/handlebars.js"></script>


    <script>

        var all_universities;

        var header_titles = ['Berkeley','UTAustin', 'Stanford', 'UCLA', 'Harvard'];
        var header_courses = ['CS 10','BIO11', 'POLI3', 'ENG14', 'CS 50'];
        var header_index = 1;

        $(document).ready(function() {


            //close click handler for jquery
            $('#close-sidebar').click(function() {
                $('body').removeClass('active');
            })

            $('.box-shadow-menu').click(function() {
                $('body').addClass('active');
            });

            $('.university-link').on('click', function() {
                console.log('this was clicked');
                console.log($(this).find('span.title').text().replace('/&/&','_').replace('//g','_').toLowerCase());
            });

            animateUniversityAndCourses();

        });

        var animateUniversityAndCourses = function() {
            $('#course-header-text').addClass('animated fadeOut');
            $('#university-header-text').addClass('animated fadeOut');
            setTimeout(function() {
                header_index += 1;
                $('#course-header-text').removeClass('animated fadeOut').addClass('animated fadeIn');;
                $('#course-header-text').text(header_courses[header_index % 4]);
                $('#university-header-text').removeClass('animated fadeOut').addClass('animated fadeIn');;
                $('#university-header-text').text(header_titles[header_index % 4]);
            }, 3000)
            setTimeout(function() {
                $('#course-header-text').removeClass('animated fadeIn');
                $('#university-header-text').removeClass('animated fadeIn');
                animateUniversityAndCourses();
            }, 4000);
        }


        // Instantiate the Typeahead UI
        {% raw %}

                var movies = new Bloodhound({
                    datumTokenizer: function (datum) {
                        return Bloodhound.tokenizers.whitespace(datum.title);
                    },
                    limit: 5,
                    queryTokenizer: Bloodhound.tokenizers.whitespace,
                    prefetch: {
                        url: '/static/data/universities_web3.json',
                        filter: function (response) {
                            // Map the remote source JSON array to a JavaScript object array

                            return $.map(response, function (university) {
                                // university_url = "'" + university.title.replace(',','-').replace(' ', '-').replace('&','_').replace('-','_') + "'";
                                return {
                                    title: university.title,
                                    city: university.city,
                                    state: university.state,
                                    thumbnail: university.thumbnail,
                                    _id: university.id
                                };
                            });
                        }
                    },
                    sorter: function compare(a,b) {
                        if (a.title > b.title) {
                          return 1;
                        }
                        if (b.title < a.title) {
                          return -1;
                        }
                        return 0 ;
                    }
                });

                // Initialize the Bloodhound suggestion engine
                movies.initialize();

                $('.typeahead').typeahead({
                    minLength: 1,
                    highlight:true,
                    hint:true
                }, {
                    displayKey: 'title',
                    source: movies.ttAdapter(),
                    templates: {
                    empty: [
                      '<div class="tt-suggestion">',

                      '<a href="http://goo.gl/forms/UQ7WcYl3sb" class="university-link" target="_blank"><p><span class="title">No results found (yet!) </span> Click to Bring Uguru to Your University / School<img class="pure-img" src="/static/img/guru-logo-red.svg"/></p></a>',
                      '</div>'
                    ].join('\n'),
                        suggestion: Handlebars.compile("<a class='university-link' href='javascript:void(0);'><p><span class='title'>{{title}}</span>{{city}}, {{state}} <img class='pure-img' src='{{thumbnail.source}}'/></p></a>")
                    }
                }).on('typeahead:selected', function(event, suggested, dataset_name){
                    window.location.replace('/u/' + suggested.title.replace(',','').split(' ').join('_').toLowerCase() + '/' + suggested._id + '/');
                }).on('typeahead:cursorchanged', function(event, suggested, dataset_name) {
                    $('.tt-suggestion.tt-cursor img').addClass('animated wobble');
                });


            {% endraw %}
    </script>
{% endblock %}