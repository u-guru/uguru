<script>
	_state= 'messaging';
</script>
<ion-view>
	<main id='messaging' class="desktop-mode guru" ng-if="desktopMode">
		<div class="main">
			<div id="messenger" class="lyt-1-3-sidebar">
				<aside id="messenger-sidebar">
					<h1>My Gurus</h1>
					<ul>
						<li ng-repeat='relationship in user.guru_relationships|filter:student_search.search_text:strict' ng-click='setToActiveRelationship(relationship)'>
							<a class='ng-class:{"active":relationship.id === active_relationship.id}'>
								<!-- <span class="messenger-icon" style="background-image: url({{relationship.guru.profile_url}});"></span> -->
								<user-icon class="messenger-icon" size="small" url="relationship.guru.profile_url"> </user-icon>
								<span class="messenger-label"> {{relationship.guru.name}}</span>
							</a>
						</li>
					</ul>
					<div id="messenger-sidebar-search">
						<input name="messenger-sidebar-search" placeholder="Filter" ng-model='student_search.search_text' />
						<label for="messenger-sidebar-search">
							<svg viewBox="0 0 100 100">
								<path d="M42.5,71 C58.2401154,71 71,58.2401154 71,42.5 C71,26.7598846 58.2401154,14 42.5,14 C26.7598846,14 14,26.7598846 14,42.5 C14,58.2401154 26.7598846,71 42.5,71 Z M62.994485,62.994485 L85.6624699,85.6624699"></path>
							</svg>
						</label>
					</div>
				</aside>
				<div id="messenger-content">
					<div class="messenger-header">
						<h1><span class='weight-600'>{{active_relationship.nav.menu_titles[active_relationship.nav.menu.active_index]}} with </span>{{active_relationship.guru.name}}</h1>
						<a class='cta-modal-close close-button desktop-header-next'>
							<svg viewBox="0 0 100 100">
								<path d="M50,50 L50,14 L50,50 L14,50 L50,50 Z M50,50 L50,86 L50,50 L86,50 L50,50 Z"></path>
							</svg>
						</a>
						<div id="message-search" ng-if='false'>
							<input ng-if='false' placeholder="Search anything" placeholder="Filter" ng-model='active_relationship.search_text' />
							<a>
								<svg viewBox="0 0 100 100">
									<path d="M42.5,71 C58.2401154,71 71,58.2401154 71,42.5 C71,26.7598846 58.2401154,14 42.5,14 C26.7598846,14 14,26.7598846 14,42.5 C14,58.2401154 26.7598846,71 42.5,71 Z M62.994485,62.994485 L85.6624699,85.6624699"></path>
								</svg>
							</a>
						</div>
						<nav ng-if='true' id="message-nav" class="ng-class:{'active':active_relationship.msg_nav}">
							<a ng-click='toggleActiveRelationshipMessageNav()'>
								<svg class="ng-class:{'active':active_relationship.msg_nav}" viewBox="0 0 100 100">
									<path d="M14,23 L86,23"></path>
									<path d="M14,50 L86,50"></path>
									<path d="M14,77 L86,77"></path>
								</svg>
							</a>
							<div class="active">
								<ul>
									<li>
										<a ng-click='active_relationship.nav.menu.active_index = 0' ng-class="{'active': active_relationship.nav.menu.active_index === 0}">
											<svg viewBox="0 0 100 100">
												<path d="M23.2244571,18.0571429 L23.2244571,18.0571429 L78.7755429,18.0571429 C83.3177143,18.0571429 87,21.7445714 87,26.2826286 L87,65.3745143 C87,69.9177143 83.3177143,73.6 78.7755429,73.6 L57.1714286,73.6 L51,85.9428571 L44.8285714,73.6 L23.2244571,73.6 C18.6822857,73.6 15,69.9125714 15,65.3745143 L15,26.2826286 C15,21.7394286 18.6822857,18.0571429 23.2244571,18.0571429 L23.2244571,18.0571429 Z"></path>
											</svg>
										</a>
									</li>
									<li>
										<a ng-click='active_relationship.nav.menu.active_index = 1' ng-class="{'active': active_relationship.nav.menu.active_index === 1}">
											<svg viewBox="0 0 100 100">
												<path d="M24.2857143,39.7142857 C24.2085714,25.5128 35.7985143,14 50,14 C64.2014857,14 75.7914286,25.5128 75.7142857,39.7142857 C75.6001143,60.8658286 50,86 50,86 C50,86 24.4009143,60.8658286 24.2857143,39.7142857 Z M50,50 C55.6806431,50 60.2857143,45.3949289 60.2857143,39.7142857 C60.2857143,34.0336426 55.6806431,29.4285714 50,29.4285714 C44.3193569,29.4285714 39.7142857,34.0336426 39.7142857,39.7142857 C39.7142857,45.3949289 44.3193569,50 50,50 Z"></path>
											</svg>
										</a>
									</li>
									<li>
										<a ng-click='active_relationship.nav.menu.active_index = 2' ng-class="{'active': active_relationship.nav.menu.active_index === 2}">
											<svg viewBox="0 0 100 100">
												<path d="M26.5585171,14 C23.7977205,14 21.5596527,16.2337694 21.5596527,19.0057363 L21.5596527,80.9942637 C21.5596527,83.7588555 23.7894161,86 26.5575218,86 L73.4417836,86 C76.2020305,86 78.4396823,83.7643283 78.4397188,81.0001225 L78.4403462,33.5605722 C78.4403609,32.4548035 77.7876011,30.9334881 77.0011727,30.1806226 L61.5384132,15.3777783 C60.7435649,14.6168523 59.2032934,14 58.1083137,14 L26.5585171,14 Z M60.0992131,14.96 C60.0992131,14.96 60.0992131,15.4039671 60.0992131,15.9609247 L60.0992131,26.5558242 C60.0992131,29.318671 62.3364841,31.5584009 65.1045233,31.5584009 L77.4848101,31.5584009"></path>
											</svg>

										</a>
									</li>
									<li>
										<a ng-click='active_relationship.nav.menu.active_index = 3' ng-class="{'active': active_relationship.nav.menu.active_index === 3}">
											<svg viewBox="0 0 100 100">
												<path d="M15,26.9943126 C15,22.5791757 18.579658,19 22.9957852,19 L77.0042148,19 C81.420165,19 85,22.57869 85,26.9943126 L85,73.0056874 C85,77.4208243 81.420342,81 77.0042148,81 L22.9957852,81 C18.579835,81 15,77.42131 15,73.0056874 L15,26.9943126 Z M85,36 L15,36 L85,36 Z M17,66.5 L83,66.5 M17,51.5 L83,51.5 M67.5,37 L67.5,79 M32.5,37 L32.5,79 M50,37 L50,79"></path>
											</svg>
										</a>
									</li>
									<li>
										<a ng-click='active_relationship.nav.menu.active_index = 4' ng-class="{'active': active_relationship.nav.menu.active_index === 4}">
											<svg viewBox="0 0 100 100">
												<path d="M42.5,71 C58.2401154,71 71,58.2401154 71,42.5 C71,26.7598846 58.2401154,14 42.5,14 C26.7598846,14 14,26.7598846 14,42.5 C14,58.2401154 26.7598846,71 42.5,71 Z M62.994485,62.994485 L85.6624699,85.6624699"></path>
											</svg>
										</a>
									</li>
									<li>
										<a ng-click='active_relationship.nav.menu.active_index = 5' ng-class="{'active': active_relationship.nav.menu.active_index === 5}">
											<svg viewBox="0 0 100 100">
												<path d="M50,86 C69.882251,86 86,69.882251 86,50 C86,30.117749 69.882251,14 50,14 C30.117749,14 14,30.117749 14,50 C14,69.882251 30.117749,86 50,86 Z M62,41 C62,32 52.9423828,30.5131836 50,30.5131836 C47.0576172,30.5131836 38,32 38,41 C38,46.4300003 42.675293,49.1364937 50,50.2399998 C57.324707,51.3435059 62,53.8100014 62,59.2399998 C62,68.2399998 52.9423828,69.7268162 50,69.7268162 C47.0576172,69.7268162 38,68.2399998 38,59.2399998 M50,23.4736842 L50,76.5263158"></path>
											</svg>
										</a>
									</li>
									<li>
										<a ng-click='active_relationship.nav.menu.active_index = 6' ng-class="{'active': active_relationship.nav.menu.active_index === 6}">
											<svg viewBox="0 0 100 100">
										        <circle cx="50" cy="50" r="36"></circle>
										        <path d="M50,50 L50,31.5643475 L50,50 L31.5643475,50 L50,50 Z M50,50 L50,68.4356525 L50,50 L68.4356525,50 L50,50 Z"></path>
											</svg>
										</a>
									</li>
								</ul>
							</div>
						</nav>
					</div>
					<div id="message-container" class='relative'>
						<div id="messages">
							<!-- Messages -->
							<div id="messages-main" class='messages-main overflow-auto' ng-if="active_relationship.nav.menu.active_index === 0">
								<div class="message-single message-status">
									<div class="message-single-content full-x">
										<div class="message-single-status margin-auto full-x txt-center line-1-2">
											This is the beginning of your message thread with <strong>{{active_relationship.guru.name}}</strong>.
										</div>
									</div>
								</div>
								<div ng-repeat='message in active_relationship.messages|filter:active_relationship.search_text:strict' class="message-single ng-class:{'left': message.sender.id !== user.id, 'right': user.id === message.sender.id}">
									<div class='message-single-icon' ng-if='message.sender.id !== user.id'>
										<user-icon ng-if='user.profile_url' size="48" url="message.sender.profile_url"> </user-icon>
									</div>
									<div class="message-single-content">
										<div class="message-single-info">
											<span ng-if='message.sender.id !== user.id'>{{message.sender.name}}</span>
											<span ng-if='message.sender.id === user.id'>Me</span>
											<span>{{message.time_created}}</span>
										</div>
										<div class="message-single-message" ng-if='message.contents && message.contents.length'>
											{{message.contents}}
										</div>
										<div class="message-single-message" ng-if='message._file && message._file.id'>
											<div class='weight-700'> 1 file attached </div>
											<a href='{{message._file.url}}'>{{message._file.name}}, {{message._file.size/1000}}kb</a>
										</div>
									</div>
									<div class='message-single-icon' ng-if='message.sender.id === user.id'>
										<user-icon size="48" url="user.profile_url"> </user-icon>
									</div>
								</div>
								<div id='message-dropzone' class='bg-slate-50p absolute left-0 full-x weight-400 hide' style='bottom:64px; height:150px;' ng-class="{'show':showAttachments}"> Drag attachments here
								</div>
								<div id="message-box" class='bottom-0 right-0 fixed two-thirds-x'>
									<a ng-click='showAttachments = !showAttachments'>
										<svg viewBox="0 0 100 100">
											<path d="M23.9602215,14 C18.4593164,14 14,18.4585633 14,23.9588015 L14,76.0411985 C14,81.5417132 18.4592951,86 23.9602215,86 L76.0397785,86 C81.5406836,86 86,81.5414367 86,76.0411985 L86,23.9588015 C86,18.4582868 81.5407049,14 76.0397785,14 L23.9602215,14 L23.9602215,14 Z M68,50 C68,40.0588745 59.9411255,32 50,32 C40.0588745,32 32,40.0588745 32,50 C32,59.9411255 40.0588745,68 50,68 C59.9411255,68 68,59.9411255 68,50 Z"></path>
										</svg>
									</a>
									<input placeholder="Message" ng-model='active_relationship.new_message' />
									<button ng-click='sendMessage(active_relationship.new_message)' class='message-send-button bg-moxie'>
										<svg viewBox="0 0 100 100">
										    <path d="M40.863416,69.0006669 L19,69.0006669 L49.6939787,14 L80.425686,69.0006669 L58.5612746,69.0006669 L49.7317073,85.6527248 L40.863416,69.0006669 Z M49.7317073,15.3170732 L49.7317073,85.5664621 M49.7317073,14.7032382 L58.6,68.0056713 M49.7317073,15.1365913 L40.8634146,68.4390244"></path>
										</svg>
									</button>
								</div>
							</div>

							<!-- Location -->
							<div id='messages-location' class='messages-main' ng-if="active_relationship.nav.menu.active_index === 1">
								<header>
									<div class='ugrid-2 p15bottom'>
										<div class='flex-wrap-center txt-center relative'>
											<svg width="103px" height="118px" viewBox="0 0 103 118">
											    <path d="M1.5,3.49753791 C1.5,2.39432819 2.39505147,1.5 3.49753791,1.5 L99.5024621,1.5 C100.605672,1.5 101.5,2.39505147 101.5,3.49753791 L101.5,99.5024621 C101.5,100.605672 100.599654,101.5 99.4925388,101.5 L66.5,101.5 L52.2033622,115.796638 C51.814906,116.185094 51.1867037,116.186704 50.7966378,115.796638 L36.5,101.5 L3.50746124,101.5 C2.39877101,101.5 1.5,100.604949 1.5,99.5024621 L1.5,3.49753791 Z" stroke="#FFFFFF" stroke-width="3" fill="#50A5DD" stroke-linecap="round" stroke-linejoin="round"></path>
											</svg>
											<div class="absolute top-0 flex-center">
												<user-icon size="64"></user-icon>
											</div>
											<h2 class='txt-24 full-x weight-600 m15top'>Your last location shared</h2>
											<span class='full-x opacity-50 txt-16 semibold uppercase block'> Last Updated: 2 hours ago </span>
										</div>
										<div class='flex-wrap-center txt-center relative'>
											<svg width="103px" height="118px" viewBox="0 0 103 118">
											    <path d="M1.5,3.49753791 C1.5,2.39432819 2.39505147,1.5 3.49753791,1.5 L99.5024621,1.5 C100.605672,1.5 101.5,2.39505147 101.5,3.49753791 L101.5,99.5024621 C101.5,100.605672 100.599654,101.5 99.4925388,101.5 L66.5,101.5 L52.2033622,115.796638 C51.814906,116.185094 51.1867037,116.186704 50.7966378,115.796638 L36.5,101.5 L3.50746124,101.5 C2.39877101,101.5 1.5,100.604949 1.5,99.5024621 L1.5,3.49753791 Z" stroke="#FFFFFF" stroke-width="3" fill="#69B3A5
												" stroke-linecap="round" stroke-linejoin="round"></path>
											</svg>
											<div class="absolute top-0 flex-center">
												<user-icon size="64"></user-icon>
											</div>
											<h2 class='txt-24 full-x weight-600 m15top'>{{active_relationship.guru.name}}'s last location shared</h2>
											<span class='full-x opacity-50 txt-16 semibold uppercase block'> Last Updated: 5 hours ago </span>
										</div>
									</div>
								</header>
								<div class='messages-location-map gmap bg-charcoal full-x'></div>
							</div>

							<!-- Files -->
							<div id='messages-files' class='messages-main overflow-auto' ng-if="active_relationship.nav.menu.active_index === 2" >
								<!-- <div class='full-x ugrid-4 p20xy' ng-repeat='file in active_relationship.files' ng-class="{'bg-slate': file.user.id === user.id, 'bg-charcoal': file.user.id !== user.id}"> -->
								<ul>
									<li ng-repeat='file in active_relationship.files'>
										<div>
											<!-- <span ng-include="img_base + BASE + 'templates/svg/ext/' + file.type + '-fill.html'"></span> -->
											<span>
												<svg viewBox="0 0 100 100">
												    <g fill="none" stroke-linecap="round" stroke-linejoin="round">
												        <path d="M19.0000163,14 C16.2385836,14 14,16.2337694 14,19.0057363 L14,80.9942637 C14,83.7588555 16.2337694,86 19.0057363,86 L80.9942637,86 C83.7588555,86 86,83.7643283 86,81.0001225 L86,33.5605722 C86,32.4548035 85.3472697,30.9334881 84.5608909,30.1806226 L69.0991089,15.3777783 C68.3043109,14.6168523 66.7734003,14 65.6543987,14 L19.0000163,14 L19.0000163,14 Z" fill="#467693"></path>
												        <path d="M19.0000163,14 C16.2385836,14 14,16.2337694 14,19.0057363 L14,80.9942637 C14,83.7588555 16.2337694,86 19.0057363,86 L80.9942637,86 C83.7588555,86 86,83.7643283 86,81.0001225 L86,33.5605722 C86,32.4548035 85.3472697,30.9334881 84.5608909,30.1806226 L69.0991089,15.3777783 C68.3043109,14.6168523 66.7734003,14 65.6543987,14 L19.0000163,14 Z M68.0992131,14.96 C68.0992131,14.96 68.0992131,15.4039671 68.0992131,15.9609247 L68.0992131,26.5558242 C68.0992131,29.318671 70.3364841,31.5584009 73.1045233,31.5584009 L85.4848101,31.5584009" stroke="#467693" stroke-width="2" fill="#50A5DD"></path>
												        <path d="M22.6366123,64 L77.3852732,64" stroke="#FFFFFF" stroke-width="2"></path>
												        <path d="M22.6366123,76 L77.3852732,76" stroke="#FFFFFF" stroke-width="2"></path>
												        <path d="M55.6294408,52 L77.2542178,52" stroke="#FFFFFF" stroke-width="2"></path>
												        <path d="M55.6336591,40 L77.6212124,40" stroke="#FFFFFF" stroke-width="2"></path>
												        <path d="M55.4518409,28 L61.8030306,28" stroke="#FFFFFF" stroke-width="2"></path>
												        <rect stroke="#FFFFFF" stroke-width="2" fill="#467693" x="22" y="25" width="26" height="28" rx="2"></rect>
												        <path d="M31.9314179,48.9453845 C32.1640179,48.9906485 32.4187723,49.0143973 32.6943619,49.0143973 L42.5153962,49.0143973 C44.7241651,49.0143973 45.5891311,47.4805175 44.447895,45.5883809 L39.6712698,37.6688735 C38.5247851,35.7680349 36.6797244,35.7767369 35.5384884,37.6688735 L31.6684718,44.0852498 L31.2869733,43.4527362 C30.3147502,41.8408183 28.7387295,41.8409855 27.7666073,43.4527362 L26.1722924,46.0960645 C25.2000693,47.7079824 25.9371302,49.0143973 27.8183387,49.0143973 L31.2352418,49.0143973 C31.4884119,49.0143973 31.72095,48.9905711 31.9314179,48.9453845 L31.9314179,48.9453845 Z" stroke="#FFFFFF" stroke-width="2" fill="#B0D8F0"></path>
												        <circle stroke="#FFFFFF" stroke-width="2" fill="#B0D8F0" cx="28.1285714" cy="31.1285714" r="2.22857143"></circle>
												    </g>
												</svg>
											</span>
										</div>
										<div>{{file.name}}</div>
										<div ng-bind-html="file.time_created"></div>
										<div ng-if='file.user.id === user.id'>
											<span>{{user.name}}</span>
											<user-icon size="32"></user-icon>
										</div>
										<div ng-if='file.user.id !== user.id'>
											<span>{{active_relationship.guru.name}}</span>
											<user-icon size="32"></user-icon>
										</div>
									</li>
								</ul>
							</div>

							<!-- Calendar -->
							<div id='messages-calendar' class='messages-main' ng-if="active_relationship.nav.menu.active_index === 3">
								<header>
									<div class='ugrid-2 p15bottom'>
										<div class='flex-wrap-center txt-center relative'>
											<div class="calendar-tile bg-lake">
												<user-icon size="64"></user-icon>
											</div>
											<h2 class='txt-24 full-x weight-600 m15top'>Your Availability</h2>
											<span class='full-x opacity-50 txt-16 semibold uppercase block'> Last Updated: 2 hours ago </span>
										</div>
										<div class='flex-wrap-center txt-center relative'>
											<div class="calendar-tile bg-shamrock">
												<user-icon size="64"></user-icon>
											</div>
											<h2 class='txt-24 full-x weight-600 m15top'>{{active_relationship.guru.name}}'s Availability</h2>
											<span class='full-x opacity-50 txt-16 semibold uppercase block'> Last Updated: 5 hours ago </span>
										</div>
									</div>
								</header>
								<div class="bg-charcoal"></div>

							</div>

							<!-- Search -->
							<div id='messages-search' class='messages-main' ng-if="active_relationship.nav.menu.active_index === 4">
							</div>

							<!-- Billing -->
							<div id='messages-billing' class='messages-main padding-none-impt overflow-auto' ng-if="active_relationship.nav.menu.active_index === 5">
								<ul class="max-1030 p15-grid">
						            <li>
						                <div class="flex-center-vertical bg-white p15-grid">
						                    <div class="p15left">
						                        <user-icon size="84" class="border-slate"></user-icon>
						                    </div>
						                    <div class="full-x">
						                        <h2 class="txt-slate semibold txt-24"><strong class="black">You</strong> requested <strong class="black">1-on-1 help</strong> from <strong class="black">Guru</strong></h2>
						                        <div class="flex-center-vertical m05top">
						                            <span class="txt-slate txt-20 semibold p15right">02/05/16</span>
						                            <div class="credit-card x-short">
						                				<svg width="240px" height="36px" viewBox="0 0 240 36">
						                					<rect fill="none" x="0" y="0" width="240" height="36"></rect>
						                				</svg>
						                				<div class="credit-card-inside">
						                					<div class="credit-card-row">
						                						<div class="credit-card-logo"  ng-include="img_base + BASE + 'templates/cards/visa-white.html'"></div>
						                						<div class="credit-card-number">
						                							<span>&bull;&bull;&bull;&bull;</span><span>1234</span>
						                						</div>
						                					</div>
						                				</div>
						                			</div>
						                        </div>
						                    </div>
						                    <div class="txt-slate p15right txt-36 black">$150.00</div>
						                </div>
						            </li>
						        </ul>
							</div>

							<!-- Request -->
							<div id='messages-request' class='messages-main' ng-if="active_relationship.nav.menu.active_index === 6">
							</div>

					</div>
				</div>
			</div>
		</div>
	</main>
	<main id="messaging" class="mobile-mode guru lyt-reduced-header full-y" ng-if="!desktopMode">
		<aside id="messenger-sidebar" ng-class="{'active': showGurus}">
			<a ng-click="showGurus = !showGurus"></a>
			<h1>My Gurus</h1>
			<ul>
				<li ng-repeat='relationship in user.guru_relationships|filter:student_search.search_text:strict'>
					<a class='ng-class:{"active":relationship.id === active_relationship.id}' ng-click='setToActiveRelationship(relationship)' class-on-click="null:inject#messenger-sidebar|hide">
						<!-- <span class="messenger-icon" style="background-image: url({{relationship.guru.profile_url}});"></span> -->
						<user-icon class="messenger-icon" size="small" url="relationship.guru.profile_url"> </user-icon>
						<span class="messenger-label"> {{relationship.guru.name}}</span>
					</a>
				</li>
			</ul>
			<div id="messenger-sidebar-search">
				<input name="messenger-sidebar-search" placeholder="Filter" ng-model='student_search.search_text' />
				<label for="messenger-sidebar-search">
					<svg viewBox="0 0 100 100">
						<path d="M42.5,71 C58.2401154,71 71,58.2401154 71,42.5 C71,26.7598846 58.2401154,14 42.5,14 C26.7598846,14 14,26.7598846 14,42.5 C14,58.2401154 26.7598846,71 42.5,71 Z M62.994485,62.994485 L85.6624699,85.6624699"></path>
					</svg>
				</label>
			</div>
		</aside>
		<header>
			<!-- <a class="block full-y svg-white" ng-include="img_base + BASE + 'templates/svg/main/profile.html'"></a> -->
			<a class="full-y svg-white flex-center svg-stroke-4" ng-click="showGurus = !showGurus">
				<svg viewBox="0 0 100 100">
					<path d="M50.0000186,14 C30.1802821,14 14.030417,30.1419103 14.0000373,49.9835145 C13.9861494,59.7785062 17.8513192,69.2750235 24.6069034,76.038418 C31.0239706,82.4616905 39.5485232,86 48.6120989,86 C49.0955707,86 49.5825143,85.9904558 50.072062,85.969632 C70.2181637,85.1444892 86,69.3383625 86,49.9861175 C86,30.142778 69.8510029,14 50.0000186,14 L50.0000186,14 Z M24.18272,74.5721092 C25.26272,65.2447492 30.77792,57.3967492 38.83328,53.6988292 C35.65568,50.7151492 33.65696,46.4911492 33.65696,41.7986692 C33.65696,32.7871492 40.98848,25.4556292 50,25.4556292 C59.01152,25.4556292 66.34304,32.7871492 66.34304,41.7986692 C66.34304,46.4911492 64.34432,50.7151492 61.16672,53.6988292 C69.22208,57.3967492 74.73728,65.2447492 75.81728,74.5721092" fill="none" stroke="#000000" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path>
				</svg>
			</a>
			<h1 class="txt-center">My Gurus</h1>
			<!-- <a class="block full-y svg-white" ng-include="img_base + BASE + 'templates/svg/main/menu-circle.html'"></a> -->
			<a class="full-y svg-white flex-center svg-stroke-4">
				<svg viewBox="0 0 100 100">
				    <g fill="none" stroke="#000000" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
				        <circle cx="50" cy="50" r="36"></circle>
				        <path d="M31,35.5 L69,35.5"></path>
				        <path d="M31,50.5 L69,50.5"></path>
				        <path d="M31,65.5 L69,65.5"></path>
				    </g>
				</svg>
			</a>
		</header>
		<div class="lyt-reduced-header">
			<header>
				<div>
					<h1 class="full-x txt-center txt-trns-none"><span class='weight-600'>{{active_relationship.nav.menu_titles[active_relationship.nav.menu.active_index]}} with </span><span class="weight-900 txt-white">{{active_relationship.guru.name}}</span></h1>
					<a class="absolute top-0 right-0 full-y svg-white flex-center svg-stroke-4 ng-class:{'active':active_relationship.msg_nav}" ng-click='toggleActiveRelationshipMessageNav()'>
						<svg viewBox="0 0 100 100">
						    <g fill="none" stroke="#000000" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
						        <circle cx="50" cy="50" r="36"></circle>
						        <path d="M32,57 L50,39 L68,57"></path>
						    </g>
						</svg>
					</a>
				</div>
				<nav id="message-nav" class="ng-class:{'active':active_relationship.msg_nav}">
					<ul>
						<li>
							<a ng-click='active_relationship.nav.menu.active_index = 0' ng-class="{'active': active_relationship.nav.menu.active_index === 0}">
								<svg viewBox="0 0 100 100">
									<path d="M23.2244571,18.0571429 L23.2244571,18.0571429 L78.7755429,18.0571429 C83.3177143,18.0571429 87,21.7445714 87,26.2826286 L87,65.3745143 C87,69.9177143 83.3177143,73.6 78.7755429,73.6 L57.1714286,73.6 L51,85.9428571 L44.8285714,73.6 L23.2244571,73.6 C18.6822857,73.6 15,69.9125714 15,65.3745143 L15,26.2826286 C15,21.7394286 18.6822857,18.0571429 23.2244571,18.0571429 L23.2244571,18.0571429 Z"></path>
								</svg>
							</a>
						</li>
						<li>
							<a ng-click='active_relationship.nav.menu.active_index = 1' ng-class="{'active': active_relationship.nav.menu.active_index === 1}">
								<svg viewBox="0 0 100 100">
									<path d="M24.2857143,39.7142857 C24.2085714,25.5128 35.7985143,14 50,14 C64.2014857,14 75.7914286,25.5128 75.7142857,39.7142857 C75.6001143,60.8658286 50,86 50,86 C50,86 24.4009143,60.8658286 24.2857143,39.7142857 Z M50,50 C55.6806431,50 60.2857143,45.3949289 60.2857143,39.7142857 C60.2857143,34.0336426 55.6806431,29.4285714 50,29.4285714 C44.3193569,29.4285714 39.7142857,34.0336426 39.7142857,39.7142857 C39.7142857,45.3949289 44.3193569,50 50,50 Z"></path>
								</svg>
							</a>
						</li>
						<li>
							<a ng-click='active_relationship.nav.menu.active_index = 2' ng-class="{'active': active_relationship.nav.menu.active_index === 2}">
								<svg viewBox="0 0 100 100">
									<path d="M26.5585171,14 C23.7977205,14 21.5596527,16.2337694 21.5596527,19.0057363 L21.5596527,80.9942637 C21.5596527,83.7588555 23.7894161,86 26.5575218,86 L73.4417836,86 C76.2020305,86 78.4396823,83.7643283 78.4397188,81.0001225 L78.4403462,33.5605722 C78.4403609,32.4548035 77.7876011,30.9334881 77.0011727,30.1806226 L61.5384132,15.3777783 C60.7435649,14.6168523 59.2032934,14 58.1083137,14 L26.5585171,14 Z M60.0992131,14.96 C60.0992131,14.96 60.0992131,15.4039671 60.0992131,15.9609247 L60.0992131,26.5558242 C60.0992131,29.318671 62.3364841,31.5584009 65.1045233,31.5584009 L77.4848101,31.5584009"></path>
								</svg>

							</a>
						</li>
						<li>
							<a ng-click='active_relationship.nav.menu.active_index = 3' ng-class="{'active': active_relationship.nav.menu.active_index === 3}">
								<svg viewBox="0 0 100 100">
									<path d="M15,26.9943126 C15,22.5791757 18.579658,19 22.9957852,19 L77.0042148,19 C81.420165,19 85,22.57869 85,26.9943126 L85,73.0056874 C85,77.4208243 81.420342,81 77.0042148,81 L22.9957852,81 C18.579835,81 15,77.42131 15,73.0056874 L15,26.9943126 Z M85,36 L15,36 L85,36 Z M17,66.5 L83,66.5 M17,51.5 L83,51.5 M67.5,37 L67.5,79 M32.5,37 L32.5,79 M50,37 L50,79"></path>
								</svg>
							</a>
						</li>
						<li>
							<a ng-click='active_relationship.nav.menu.active_index = 4' ng-class="{'active': active_relationship.nav.menu.active_index === 4}">
								<svg viewBox="0 0 100 100">
									<path d="M42.5,71 C58.2401154,71 71,58.2401154 71,42.5 C71,26.7598846 58.2401154,14 42.5,14 C26.7598846,14 14,26.7598846 14,42.5 C14,58.2401154 26.7598846,71 42.5,71 Z M62.994485,62.994485 L85.6624699,85.6624699"></path>
								</svg>
							</a>
						</li>
						<li>
							<a ng-click='active_relationship.nav.menu.active_index = 5' ng-class="{'active': active_relationship.nav.menu.active_index === 5}">
								<svg viewBox="0 0 100 100">
									<path d="M50,86 C69.882251,86 86,69.882251 86,50 C86,30.117749 69.882251,14 50,14 C30.117749,14 14,30.117749 14,50 C14,69.882251 30.117749,86 50,86 Z M62,41 C62,32 52.9423828,30.5131836 50,30.5131836 C47.0576172,30.5131836 38,32 38,41 C38,46.4300003 42.675293,49.1364937 50,50.2399998 C57.324707,51.3435059 62,53.8100014 62,59.2399998 C62,68.2399998 52.9423828,69.7268162 50,69.7268162 C47.0576172,69.7268162 38,68.2399998 38,59.2399998 M50,23.4736842 L50,76.5263158"></path>
								</svg>
							</a>
						</li>
						<li>
							<a ng-click='active_relationship.nav.menu.active_index = 6' ng-class="{'active': active_relationship.nav.menu.active_index === 6}">
								<svg viewBox="0 0 100 100">
									<circle cx="50" cy="50" r="36"></circle>
									<path d="M50,50 L50,31.5643475 L50,50 L31.5643475,50 L50,50 Z M50,50 L50,68.4356525 L50,50 L68.4356525,50 L50,50 Z"></path>
								</svg>
							</a>
						</li>
					</ul>
				</nav>
			</header>
			<div id="messages" class="relative">
				<!-- Messages -->
				<div class='messages-main overflow-auto'>
					<div class="message-single message-status">
						<div class="message-single-content full-x">
							<div class="message-single-status margin-auto full-x txt-center line-1-2">
								This is the beginning of<br/>your message thread with <strong>{{active_relationship.guru.name}}</strong>.
							</div>
						</div>
					</div>
					<div ng-repeat='message in active_relationship.messages|filter:active_relationship.search_text:strict' class="message-single ng-class:{'left': message.sender.id !== user.id, 'right': user.id === message.sender.id}">
						<div class='message-single-icon' ng-if='message.sender.id !== user.id'>
							<user-icon ng-if='user.profile_url' size="32" url="message.sender.profile_url"> </user-icon>
						</div>
						<div class="message-single-content">
							<div class="message-single-info">
								<span ng-if='message.sender.id !== user.id'>{{message.sender.name}}</span>
								<span ng-if='message.sender.id === user.id'>Me</span>
								<span>{{message.time_created}}</span>
							</div>
							<div class="message-single-message" ng-if='message.contents && message.contents.length'>
								{{message.contents}}
							</div>
							<div class="message-single-message" ng-if='message._file && message._file.id'>
								<div class='weight-700'> 1 file attached </div>
								<a href='{{message._file.url}}'>{{message._file.name}}, {{message._file.size/1000}}kb</a>
							</div>
						</div>
						<div class='message-single-icon' ng-if='message.sender.id === user.id'>
							<user-icon size="32" url="user.profile_url"> </user-icon>
						</div>
					</div>
					<div id='message-dropzone' class='bg-slate-50p absolute left-0 full-x weight-400 hide' style='bottom:64px; height:150px;' ng-class="{'show':showAttachments}"> Drag attachments here
					</div>
					<div id="message-box" class='bottom-0 right-0 fixed two-thirds-x'>
						<a ng-click='showAttachments = !showAttachments'>
							<svg viewBox="0 0 100 100">
								<path d="M23.9602215,14 C18.4593164,14 14,18.4585633 14,23.9588015 L14,76.0411985 C14,81.5417132 18.4592951,86 23.9602215,86 L76.0397785,86 C81.5406836,86 86,81.5414367 86,76.0411985 L86,23.9588015 C86,18.4582868 81.5407049,14 76.0397785,14 L23.9602215,14 L23.9602215,14 Z M68,50 C68,40.0588745 59.9411255,32 50,32 C40.0588745,32 32,40.0588745 32,50 C32,59.9411255 40.0588745,68 50,68 C59.9411255,68 68,59.9411255 68,50 Z"></path>
							</svg>
						</a>
						<input placeholder="Message" ng-model='active_relationship.new_message' />
						<button ng-click='sendMessage(active_relationship.new_message)' class='message-send-button bg-moxie'>
							<svg viewBox="0 0 100 100">
								<path d="M40.863416,69.0006669 L19,69.0006669 L49.6939787,14 L80.425686,69.0006669 L58.5612746,69.0006669 L49.7317073,85.6527248 L40.863416,69.0006669 Z M49.7317073,15.3170732 L49.7317073,85.5664621 M49.7317073,14.7032382 L58.6,68.0056713 M49.7317073,15.1365913 L40.8634146,68.4390244"></path>
							</svg>
						</button>
					</div>
				</div>
			</div>
		</div>
	</main>
</ion-view>