<ion-view >
    <div id="build">
        <main ng-class="{'full-x': settings.hideUIEditor }">
            <nav class="build-main-top relative">
                <div style='z-index:2000;' ng-class="{'opacity-0 fadeInDownBig animated': status.show, 'opacity-1 animated bounceOutUp animated': !status.show}" class='opacity-1 absolute full-xy bg-charcoal-80p high-z-index flex-wrap-center txt-7 uppercase weight-700'>
                    {{status.msg}}
                </div>
                <div>
                    <a class="block m15left" ng-click='settings.user_mode = !settings.user_mode; settings.activated = true;'>
                        <user-icon ng-click='settings.user_mode' size='36' url="user.profile_url"></user-icon>
                    </a>
                    <h1>{{current_file.name || 'Loading'}}</h1>
                    <dropdown class="no-header double" ng-if="page.dropdowns.templates" ng-model="page.dropdowns.templates"></dropdown>
                </div>
                <ul>
                    <li>
                        <!-- <a ng-include="img_base + BASE + 'templates/svg/main/sync.html'"></a> -->
                        <a ng-if='!current_file.selected_variation.edit_mode' ng-click='current_file.methods.variation.editName(current_file)' ng-include="img_base + BASE + 'templates/svg/main/edit.html'"></a>
                    </li>
                    <li class="flex">
                        <div class="flex" ng-class="{'active':!current_file.selected_variation.name && !current_file.selected_variation.edit_mode}">
                            <input ng-model='clonedVariationInputName' placeholder="name"/>
                            <a class="bg bg-moxie" ng-click='saveClonedVariationName(current_file.selected_variation)' ng-include="img_base + BASE + 'templates/svg/main/check.html'"></a>
                            <a class="bg bg-crimson close-icon" ng-click='cancelVariationFork(current_file.selected_variation)' ng-include="img_base + BASE + 'templates/svg/main/plus.html'"></a>
                        </div>
                        <div class="flex" ng-class="{'active':current_file.selected_variation.edit_mode}">
                            <input ng-model='current_file.selected_variation.name' placeholder="name"/>
                            <a class="bg bg-moxie" ng-click='saveVariationName(current_file.selected_variation)' ng-include="img_base + BASE + 'templates/svg/main/check.html'"></a>
                            <a class="bg bg-crimson close-icon" ng-click='current_file.methods.variation.cancelName(current_file)' ng-include="img_base + BASE + 'templates/svg/main/plus.html'"></a>
                        </div>
                        <a ng-click='current_file.methods.variation.fork(current_file)' ng-include="img_base + BASE + 'templates/svg/main/branch.html'"></a>
                    </li>
                    <li>
                        <a ng-click='current_file.methods.variation.promote(current_file)' ng-include="img_base + BASE + 'templates/svg/main/star-arrow.html'"></a>
                    </li>
                    <li>
                        <a ng-click='current_file.methods.variation.archive(current_file)' class="close-icon" ng-include="img_base + BASE + 'templates/svg/main/plus.html'"></a>
                    </li>
                    <li>
                        <a ng-click='current_file.methods.save(current_file)' ng-include="img_base + BASE + 'templates/svg/main/save-simple.html'"></a>
                    </li>

                    <li>
                        <a ng-click="settings.activated = !settings.activated; settings.view_files = true;" ng-include="img_base + BASE + 'templates/svg/main/folder.html'"></a>
                    </li>
                    <li>
                        <a ng-click='settings.activated = !settings.activated; settings.view_files = false;' ng-include="img_base + BASE + 'templates/svg/main/settings.html'"></a>
                    </li>
                </ul>
            </nav>

            <div class='build-player bg-charcoal bg-charcoal animated tada infinite flex-wrap-center' ng-if='player.hide'>
                <h1 class='text-7'>{{player.status_message}}</h1>
                <button ui-sref="^.desktop-login" class='animated pulse infinite'>Login</button>
            </div>
            <div class="build-player bg-charcoal" ng-if='!player.hide'>
                <!-- classes are named after sizes, i.e. desktop-s 1024x768 means you add .desktop-s to .build-player -->
            </div>
            <!-- <div class="build-search-results active">
                    <ul>
                        <li ng-repeat="component in page.components">


                            <span class='weight-700'>
                                MY ACTION ITEMS
                            </span>
                            <a>#{{component.ref}}</a>

                        </li>
                        <li><a>{{component.ref}}</a></li>
                        <li><a>checkbox</a></li>
                        <li><a>profile card</a></li>
                        <li><a>dropdown</a></li>
                        <li><a>tile group</a></li>
                        <li><a>checkbox</a></li>
                        <li><a>profile card</a></li>
                        <li><a>dropdown</a></li>
                        <li><a>tile group</a></li>
                        <li><a>checkbox</a></li>
                        <li><a>profile card</a></li>
                        <li><a>dropdown</a></li>
                        <li><a>tile group</a></li>
                        <li><a>checkbox</a></li>
                        <li><a>profile card</a></li>
                    </ul>
                </div> -->
                <!-- <label for="build-search" ng-include="img_base + BASE + 'templates/svg/main/search.html'"></label>
                <input id="build-search" type="text" placeholder="Add component"/> -->
            <nav id='bottom-nav-status-bar' class="opacity-0 build-main-bottom bg-transparent bg-charcoal-50p bottom-0 left-0 high-z-index absolute full-x" style='width:66.6% !important;'>
                <div class='flex-wrap-center txt-white full-xy absolute uppercase bg-charcoal-50p'>
                    {{page.status.msg}}
                </div>
            </nav>
        </main>
        <aside class='build-settings relative' ng-if='settings.activated'>
            <h1 ng-if='!settings.view_files && !settings.key_shortcuts && !settings.user_mode' class='relative flex-center bg-moxie p15x bg-moxie txt-28 semibold'>Settings </h1>
            <h1 ng-if='settings.key_shortcuts' class='relative flex-center bg-moxie p15x bg-moxie txt-28 semibold'>Shortcuts</h1>
            <h1 ng-if='settings.view_files' class='relative flex-center bg-moxie p15x bg-moxie txt-28 semibold'>My Files</h1>
            <h1 ng-if='settings.user_mode' class='relative flex-center bg-moxie p15x bg-moxie txt-28 semibold'>Docs</h1>
            
            <a ng-if='!settings.view_files && !settings.key_shortcuts' class="absolute top-0 left-0 back-icon close-icon svg-white svg-36 svg-stroke-6 flex-center" ng-click='settings.activated = false;' ng-include="img_base + BASE + 'templates/svg/main/plus.html'"></a>
            
            <a ng-if='settings.key_shortcuts' class="absolute top-0 left-0 back-icon svg-white svg-36 svg-stroke-6 flex-center" ng-click='settings.key_shortcuts = false;' ng-include="img_base + BASE + 'templates/svg/main/left.html'"></a>
            <a ng-if='settings.view_files' class="absolute top-0 left-0 back-icon svg-white svg-36 svg-stroke-6 flex-center" ng-click='settings.view_files = false;' ng-include="img_base + BASE + 'templates/svg/main/left.html'"></a>
            
            <div ng-if='settings.user_mode' class='build-docs'>
                <tabs class='ugrid-4' options="page.dropdowns.user_settings.options" index='page.dropdowns.user_settings.selectedIndex'> </tabs>
                <ul class="build-docs-priority p15-grid overflow-auto" ng-if='!page.dropdowns.user_settings.selectedIndex'>
                    <li ng-repeat='file in ["splash.html", "maps.html", ]'>
                        <div class="checkbox-container">
                            <div>
                                <div class="flex-center bg-campus txt-18 semibold">
                                    {{$index}}
                                </div>
                                <input type="checkbox" id="priority-item-{{$index}}" ng-model="checkbox.value" on-change="onChange && onChange()"/>
                                <span>
                                    <svg viewBox="0 0 100 100">
                                        <path d="M14,54.2352941 L35.1764706,75.4117647 L86,24.5882353"></path>
                                    </svg>
                                </span>
                            </div>
                            <label class="flex-center-vertical-wrap bg-slate-50p radius-2-right p15x" for="priority-item-{{$index}}">
                                <div class="full-x txt-24 semibold">{{file}}</div>
                                <div class="full-x semibold txt-14 opacity-50">Updated: 3/24 @ 20:54pm</div>
                            </label>
                        </div>
                    </li>
                </ul>
                <ul class="build-docs-history p15-grid overflow-auto" ng-if='page.dropdowns.user_settings.selectedIndex === 1'>
                    <li ng-repeat='file in ["splash.html", "maps.html", "become-guru-1", "become-guru-2", "become-guru-3"]'>
                        <div class="build-file radius-2 overflow-hidden">
                            <a class="flex-center-vertical full-x bg-slate-50p">
                                <div class="build-file-index bg-campus semibold flex-center txt-18">
                                    {{$index}}
                                </div>
                                <div class="p15left">
                                    <h2 class="txt-24 semibold">{{file}}</h2>
                                    <span class="block txt-14 semibold opacity-50">Updated: 3/24 @ 20:54pm</span>
                                </div>
                                <span class="svg-white svg-32 svg-stroke-6" ng-include="img_base + BASE + 'templates/svg/main/down.html'"></span>
                            </a>
                            <ul class="bg-slate-75p p15-grid">
                                <li>
                                    <div class="flex-center-vertical-space-between">
                                        <div class="flex-center-vertical">
                                            <user-icon size="36"> </user-icon>
                                            <div class="m15left">
                                                <div class="txt-20 semibold">File Name</div>
                                                <div class="txt-14 semibold opacity-50">Updated: 3/24 @ 20:54pm</div>
                                            </div>
                                        </div>
                                        <a class='svg-white svg-32 svg-stroke-6 opacity-50' ng-include='img_base + BASE + "templates/svg/main/share.html"'></a>
                                    </div>
                                </li>
                                <li>
                                    <div class="flex-center-vertical-space-between">
                                        <div class="flex-center-vertical">
                                            <user-icon size="36"> </user-icon>
                                            <div class="m15left">
                                                <div class="txt-20 semibold">File Name</div>
                                                <div class="txt-14 semibold opacity-50">Updated: 3/24 @ 20:54pm</div>
                                            </div>
                                        </div>
                                        <a class='svg-white svg-32 svg-stroke-6 opacity-50' ng-include='img_base + BASE + "templates/svg/main/share.html"'></a>
                                    </div>
                                </li>
                                <li>
                                    <div class="flex-center-vertical-space-between">
                                        <div class="flex-center-vertical">
                                            <user-icon size="36"> </user-icon>
                                            <div class="m15left">
                                                <div class="txt-20 semibold">File Name</div>
                                                <div class="txt-14 semibold opacity-50">Updated: 3/24 @ 20:54pm</div>
                                            </div>
                                        </div>
                                        <a class='svg-white svg-32 svg-stroke-6 opacity-50' ng-include='img_base + BASE + "templates/svg/main/share.html"'></a>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </li>
                </ul>
                <ul class="build-docs-tuts p15-grid overflow-auto" ng-if='page.dropdowns.user_settings.selectedIndex === 2'>
                    <li>
                        <div class="bg-slate-50p radius-2 overflow-hidden">
                            <h2 class="flex bg-slate">
                                <span class="flex-center bg-campus semibold txt-18">1</span>
                                <span class="flex-center-vertical p10x txt-18 semibold">This is a title</span>
                            </h2>
                            <div class="p15x-p10y txt-18">
                                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                                <ul>
                                    <li>Lorem ipsum dolor sit amet</li>
                                    <li>Consectetur adipisicing elit</li>
                                </ul>
                                <ol>
                                    <li>Lorem ipsum dolor sit amet</li>
                                    <li>Consectetur adipisicing elit</li>
                                </ol>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="bg-slate-50p radius-2 overflow-hidden">
                            <h2 class="flex bg-slate">
                                <span class="flex-center-vertical p10x txt-18 semibold">This is a title</span>
                            </h2>
                            <div class="p15x-p10y txt-18">
                                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                                <ul>
                                    <li>Lorem ipsum dolor sit amet</li>
                                    <li>Consectetur adipisicing elit</li>
                                </ul>
                                <ol>
                                    <li>Lorem ipsum dolor sit amet</li>
                                    <li>Consectetur adipisicing elit</li>
                                </ol>
                            </div>
                        </div>
                    </li>
                </ul>
                <ul class="build-docs-components p15-grid ugrid-2 overflow-auto" ng-if='page.dropdowns.user_settings.selectedIndex === 3'>
                    <li>
                        <div class="component-tile">
            				<div>
            					<div>
            						<svg class="square" viewBox="0 0 100 100">
            							<rect x="0" y="0" width="100" height="100" fill="none"></rect>
            						</svg>
            						<div>
            							<!-- component goes in here -->
                                        <!-- http://codepen.io/teamuguru/pen/550e8f8e7227df7c4bf72a6b94b0bda2?editors=1100 -->
            						</div>
            					</div>
            					<aside>
            						<h2>Name</h2>
            						<h3>Component</h3>
            					</aside>
            				</div>
            			</div>
                    </li>
                    <li>
                        <div class="component-tile">
            				<div>
            					<div>
            						<svg class="square" viewBox="0 0 100 100">
            							<rect x="0" y="0" width="100" height="100" fill="none"></rect>
            						</svg>
            						<div>
            							<!-- component goes in here -->
                                        <!-- http://codepen.io/teamuguru/pen/550e8f8e7227df7c4bf72a6b94b0bda2?editors=1100 -->
            						</div>
            					</div>
            					<aside>
            						<h2>Name</h2>
            						<h3>Component</h3>
            					</aside>
            				</div>
            			</div>
                    </li>
                    <li>
                        <div class="component-tile">
            				<div>
            					<div>
            						<svg class="square" viewBox="0 0 100 100">
            							<rect x="0" y="0" width="100" height="100" fill="none"></rect>
            						</svg>
            						<div>
            							<!-- component goes in here -->
                                        <!-- http://codepen.io/teamuguru/pen/550e8f8e7227df7c4bf72a6b94b0bda2?editors=1100 -->
            						</div>
            					</div>
            					<aside>
            						<h2>Name</h2>
            						<h3>Component</h3>
            					</aside>
            				</div>
            			</div>
                    </li>
                    <li>
                        <div class="component-tile">
            				<div>
            					<div>
            						<svg class="square" viewBox="0 0 100 100">
            							<rect x="0" y="0" width="100" height="100" fill="none"></rect>
            						</svg>
            						<div>
            							<!-- component goes in here -->
                                        <!-- http://codepen.io/teamuguru/pen/550e8f8e7227df7c4bf72a6b94b0bda2?editors=1100 -->
            						</div>
            					</div>
            					<aside>
            						<h2>Name</h2>
            						<h3>Component</h3>
            					</aside>
            				</div>
            			</div>
                    </li>
                    <li>
                        <div class="component-tile">
            				<div>
            					<div>
            						<svg class="square" viewBox="0 0 100 100">
            							<rect x="0" y="0" width="100" height="100" fill="none"></rect>
            						</svg>
            						<div>
            							<!-- component goes in here -->
                                        <!-- http://codepen.io/teamuguru/pen/550e8f8e7227df7c4bf72a6b94b0bda2?editors=1100 -->
            						</div>
            					</div>
            					<aside>
            						<h2>Name</h2>
            						<h3>Component</h3>
            					</aside>
            				</div>
            			</div>
                    </li>
                    <li>
                        <div class="component-tile">
            				<div>
            					<div>
            						<svg class="square" viewBox="0 0 100 100">
            							<rect x="0" y="0" width="100" height="100" fill="none"></rect>
            						</svg>
            						<div>
            							<!-- component goes in here -->
                                        <!-- http://codepen.io/teamuguru/pen/550e8f8e7227df7c4bf72a6b94b0bda2?editors=1100 -->
            						</div>
            					</div>
            					<aside>
            						<h2>Name</h2>
            						<h3>Component</h3>
            					</aside>
            				</div>
            			</div>
                    </li>
                    <li>
                        <div class="component-tile">
            				<div>
            					<div>
            						<svg class="square" viewBox="0 0 100 100">
            							<rect x="0" y="0" width="100" height="100" fill="none"></rect>
            						</svg>
            						<div>
            							<!-- component goes in here -->
                                        <!-- http://codepen.io/teamuguru/pen/550e8f8e7227df7c4bf72a6b94b0bda2?editors=1100 -->
            						</div>
            					</div>
            					<aside>
            						<h2>Name</h2>
            						<h3>Component</h3>
            					</aside>
            				</div>
            			</div>
                    </li>
                    <li>
                        <div class="component-tile">
            				<div>
            					<div>
            						<svg class="square" viewBox="0 0 100 100">
            							<rect x="0" y="0" width="100" height="100" fill="none"></rect>
            						</svg>
            						<div>
            							<!-- component goes in here -->
                                        <!-- http://codepen.io/teamuguru/pen/550e8f8e7227df7c4bf72a6b94b0bda2?editors=1100 -->
            						</div>
            					</div>
            					<aside>
            						<h2>Name</h2>
            						<h3>Component</h3>
            					</aside>
            				</div>
            			</div>
                    </li>
                </ul>
                
                <input type="text" placeholder="Filter" ng-if='page.dropdowns.user_settings.selectedIndex === 3' />
            </div>
            
            <ul class="p15-grid overflow-auto full-xy" ng-if='settings.key_shortcuts'>
                <li ng-repeat='shortcut in shortcuts'>
                    <div class='bg-slate-50p flex-center-vertical p15xy'>
                        <div class='txt-2 uppercase weight-600 opacity-50 line-height-1-2' style="width: calc(100% / 3);">
                            {{shortcut.name}}
                        </div>
                        <div class='txt-5 lowercase weight-700 p15left line-height-1-2' style="width: calc(100% / 3 * 2);">
                            {{shortcut.keys}}
                        </div>
                    </div>
                </li>
            </ul>
            
            <div ng-if='settings.view_files' class='full-x'>
                 <tabs class='ugrid-5' options="files.users.options" index='files.users.options.index'> </tabs>
            </div>
            <ul class="build-files-list overflow-auto" ng-if='settings.view_files'>
                <li ng-repeat='file in files.all[files.users.options[files.users.options.index]]["files"]' ng-if='$index >= 1'>
                    <h1 class="bg-campus p10xy txt-center txt-18 semibold" ng-if='file.type === "folder"'>{{file.name}}</h1>
                    <div ng-if='file.type === "file"'>
                        <a class="build-files-dropdown flex-space-between full-x p15xy" ng-click="file.collapse = !file.collapse" ng-class="{'active': file.collapse}">
                            <div>
                                <h2 class="txt-20 semibold">{{file.name.split('/').reverse()[0]}}</h2>
                                <span class="block txt-16 semibold opacity-50">Last updated {{file.last_modified_formatted}}</span>
                            </div>
                            <span class="svg-white svg-32 svg-stroke-6" ng-include="img_base + BASE + 'templates/svg/main/down.html'"></span>
                        </a>
                        <ul ng-if='file.collapse' class="bg-slate-50p p15-grid">
                            <li>
                                <div class="flex-center-vertical-space-between">
                                    <span class="block txt-20 semibold">Your cloned file #1</span>
                                    <a class='svg-white svg-32 svg-stroke-6 opacity-50' ng-include='img_base + BASE + "templates/svg/main/star-arrow.html"'></a>
                                </div>
                            </li>
                            <li>
                                <div class="flex-center-vertical-space-between">
                                    <span class="block txt-20 semibold">Your cloned file #2</span>
                                    <a class='svg-white svg-32 svg-stroke-6 opacity-50' ng-include='img_base + BASE + "templates/svg/main/star-arrow.html"'></a>
                                </div>
                            </li>
                            <li>
                                <div class="flex-center-vertical-space-between">
                                    <span class="block txt-20 semibold">Your cloned file #3</span>
                                    <a class='svg-white svg-32 svg-stroke-6 opacity-50' ng-include='img_base + BASE + "templates/svg/main/star-arrow.html"'></a>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <!-- <div ng-if='file.add_one' class='ugrid-3 txt-2 weight-300 opacity-50 full-x p20xy mtop10'>
                        <div>
                            <input class='full-y' ng-model='file.new_file_name' placeholder='place new file name here'>
                            </input>
                        </div>
                        <div class='flex-wrap-center relative'>
                            <a class='txt-white bg-charcoal absolute full-xy' ng-click='files.createFile(file.new_file_name)'> save </a>
                        </div>
                        <div class='relative'>
                            <a class='txt-white bg-charcoal absolute full-xy' ng-click='file.add_one = null'> cancel </a>
                        </div>
                    </div> -->
                </li>
            </ul>
            
            <ul class="build-settings-list" ng-if='!settings.view_files && !settings.key_shortcuts && !settings.user_mode'>
                <li><a ng-click="settings.view_files = true;">View Files</a></li>
                <li><a ng-click="settings.key_shortcuts = true;">View Shortcuts</a></li>
                <li>
                    <dropdown class="height-32" ng-model="page.dropdowns.fileOptions"></dropdown>
                </li>
                <li>
                    <div class="dropdown-container">
                        <h2>Scene</h2>
                        <dropdown class="height-32 no-header double" ng-if="page.dropdowns.templates" ng-model="page.dropdowns.templates"></dropdown>
                    </div>
                </li>
                <li>
                    <dropdown class="height-32" ng-model="page.dropdowns.screenSizeOptions"></dropdown>
                </li>
                <li><a ng-click="clearCache()">Clear Cache</a></li>
                <li>
                    <div>
                        <span>Toggle UI Builder</span>
                        <div class="toggle">
            				<input type="checkbox" checked ng-click="settings.hideUIEditor = !settings.hideUIEditor" />
            				<label>
            					<svg class="square" viewBox="0 0 100 100">
            						<rect x="0" y="0" width="100" height="100"></rect>
            					</svg>
            					<svg class="square" viewBox="0 0 100 100">
            						<rect x="0" y="0" width="100" height="100"></rect>
            					</svg>
            				</label>
            			</div>
                    </div>
                </li>
            </ul>
        </aside>
        <aside ng-if='!settings.activated && !settings.hideUIEditor' class='relative'>
            <nav class="build-aside-top">
                <ul ng-if='current_file.selected_variation.scene_states && current_file.selected_variation.scene_states.length && !settings.activated'>
                    <li ng-repeat='scene_state in current_file.selected_variation.scene_states track by $index'><a ng-click='page.mode.scene.switchTo(current_file.selected_variation, $index)' ng-class="{'active': scene_state.active}">{{$index + 1}}</a></li>
                </ul>
            </nav>

            <nav class="build-aside-state">
                <ul ng-repeat='scene_state in current_file.selected_variation.scene_states track by $index' ng-if="scene_state.active">
                    <li>
                        <div>
                            <h2>State #{{$index + 1}}</h2>
                            <h1 class='uppercase opacity-80'>{{scene_state.name}}</h1>
                        </div>
                    </li>
                    <li>
                        <div>
                            <dropdown class='full-x' ng-model="page.dropdowns.modes"></dropdown>
                        </div>
                    </li>
                </ul>
            </nav>
            <div class='absolute full-xy bg-charcoal-90p flex-wrap-center flex-stretch high-z-index' ng-if='current_file.selected_variation.selected_scene_state.component_mode'>
                <div class='header text-center uppercase relative full-x'>
                    <div class='full-xy absolute'>
                        <h1 class='weight-700'> Add Component Mode </h1>
                        <div class='txt-2 uppercase opacity-50 weight-500'>
                            Press ESC to exit<br> double tap to add
                        </div>
                    </div>
                </div>
                <div class="build-aside-preview">
                    <div>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</div>
                </div>
                <div class='full-x bg-slate-50p p20xy flex-wrap-center text-center'>
                    <h1 class='full-x text-center'>
                        Only show components within the dimensions
                    </h1>
                    <div ng-init="width = 50; height = 50;" class='full-x p20xy'>
                        <small class='txt-1'> width: {{width}}px </small>
                        <input ng-change="onWidthRangeSliderChange(width)" type="range" min="0" max="500" ng-model="width"/>
                        <small class='txt-1'> height: {{height}}px </small>
                        <input type="range" min="0" max="500" ng-model="height"/>
                    </div>
                </div>
            </div>
            <div class='build-element-list animation relative'>
                <ul ng-repeat='scene_state in current_file.selected_variation.scene_states track by $index' ng-if='scene_state.active' class='relative full-y'>

                    <!-- timeline -->
                    <li class="build-timeline" ng-repeat='time_state in scene_state.time_states' ng-if='!page.dropdowns.modes.selectedIndex'>
                        <div class='relative full-x'>
                            <h1 class="relative has-link">
                                <a ng-click='editTimeStateTime(timeline, time_state, $event)' ng-if='!time_state.edit_mode' >
                                    <span class="lowercase">

                                        <span class='txt-6 uppercase' ng-if='!time_state.time'>T = Init</span>
                                        <span ng-if='time_state.time'>T: {{time_state.time}}</span>
                                    </span>
                                </a>
                                <div class='ugrid-2' ng-if='time_state.edit_mode'>
                                    <input class='full-y p05xy' placeholder="value" ng-model="time_state.time"/>
                                    <a ng-click='editTimeStateTime(current_file.selected_variation.timeline, time_state, $event, "sort")' class='txt-2'> Save </a>
                                    <a class='txt-2' ng-click='editTimeStateTime(current_file.selected_variation.timeline, time_state, $event, "cancel")'> Cancel </a>
                                </div>

                            </h1>
                            <a ng-if='time_state.time' class='build-activate close'  ng-click='removeTimeState($index)'></a>
                            <a ng-click='updateTimeStateCollapses(current_file.selected_variation.timeline, time_state)' ng-include="img_base + BASE + 'templates/svg/main/external.html'" ng-if="time_state.components.length"></a>
                            <a ng-if='time_state.components.length' class='high-z-index right-0 bottom-0 absolute bg-charcoal-impt'>&rtrif;</a>
                        </div>
                        <div class="relative" ng-show='time_state.focused'>
                            <h1 class='full-x p20xy text-center relative uppercase border-white-dashed'>
                                <a ng-click='page.mode.component.initMode(scene_state, time_state)'> + Add Components </a>
                            </h1>
                            <!-- <ul class="build-save">
                                <li>
                                    <a class="build-activate" ng-include="img_base + BASE + 'templates/svg/main/commit.html'"></a>
                                </li>
                                <li>
                                    <a class="build-activate" ng-include="img_base + BASE + 'templates/svg/main/save-simple.html'"></a>
                                </li>
                            </ul> -->
                            <div class="build-css-select full-x">

                                <!-- @samir -->
                                <!-- component previews go in here <div></div> -->
                                <ul class='time-state-component-bar'>
                                    <li ng-click='selectTimeStateComponent(time_state, component, $event)' ng-repeat='component in time_state.components track by $index' class='time-state-component-item'>
                                        <div class='full-y'></div>
                                        <a class='z-index-10 m05xy right-0 bottom-0 absolute'>&rtrif;</a>
                                    </li>
                                </ul>
                            </div>
                            <ul class="build-css-list full-x" ng-repeat='component in time_state.components'>
                                <li class='init full-x relative' ng-if='component.init_time_state && component.init_time_state.time < 0'>
                                    <div>
                                        <span ng-repeat='property in component.init_time_state.properties'>{{property.name}}</span>
                                    </div>
                                    <div class='relative flex-wrap-center'>
                                        <div ng-repeat='property in component.init_time_state.properties'>
                                            <input ng-if='property.type === "css_text"' placeholder="value" ng-model="property.value"/>
                                            <span ng-if='property.type !== "css_text"'> -- </span>
                                        </div>
                                    </div>
                                    <div>
                                        <a  ng-repeat="property in component.init_time_state.properties" ng-click='component.removePropertyField(component, component.init_time_state, $index)'>&times;</a>
                                    </div>
                                </li>
                                <li ng-repeat='nested_time_state in component.time_states track by $index' >
                                    <div class='txt-4'>
                                        <span class="radius-2" ng-if='property.type === "css_text"' ng-repeat='property in nested_time_state.properties' ng-click='component.addPropertyField(component, component.nested_time_state)'>
                                            {{property.name}}
                                            <span class='opacity-50'> &nbsp;&nbsp;&nbsp;[{{property.type.replace('css_','')}}] </span>
                                        </span>
                                        <span ng-repeat='property in nested_time_state.properties' class="build-class radius-2" ng-if='property.type === "css_class"'ng-click='component.addPropertyField(component, component.empty_time_state, property.name)'>
                                            .{{property.name}}
                                            <span class='opacity-50'> &nbsp;&nbsp;&nbsp;[{{property.type.replace('css_','')}}] </span>
                                        </span>
                                        <span ng-click='component.addPropertyField(component, component.empty_time_state, property.name)' ng-repeat='property in nested_time_state.properties' class="build-class radius-2" ng-if='property.type === "css_animation"'>
                                            .{{property.name}}
                                            <span class='opacity-50'> &nbsp;&nbsp;&nbsp;[{{property.type.replace('css_','')}}] </span>
                                        </span>
                                    </div>
                                    <div>

                                        <span class="radius-2" ng-repeat='property in nested_time_state.properties' ng-if='property.type === "css_text"'>{{property.value}}</span>
                                        <span ng-repeat='property in nested_time_state.properties' class="radius-2 opacity-50" ng-if='property.type === "css_class"'>{{property.type}}</span>
                                        <dropdown ng-if='property.type === "css_animation"' ng-repeat="property in nested_time_state.properties" ng-model="property.value"> </dropdown>
                                        <!-- <div ng-repeat="property in nested_time_state.properties">
                                            <span class="radius-2" ng-if='property.type === "css_text"'>{{property.value}}</span>
                                            <span class="radius-2 opacity-50" ng-if='property.type === "css_class"'>{{property.value}}</span>
                                            <dropdown ng-if='property.type === "css_animation"' ng-model="property.value"> </dropdown>
                                        </div> -->
                                    </div>
                                    <div>
                                        <a ng-repeat='property in nested_time_state.properties' ng-click='component.removePropertyField(component, time_state, $index, $parent.$index)'>&times;</a>
                                    </div>
                                </li>
                                <li>
                                    <div>
                                        <span class="radius-2" ng-repeat='property in component.empty_time_state.properties'>{{property.name}}</span>
                                    </div>
                                    <div class='empty-state-values' style="overflow:visible;">
                                        <span class='relative' style='overflow:visible;' ng-repeat='property in component.empty_time_state.properties' class='radius-2 bg-charcoal'>
                                            <input ng-keyup="($event.keyCode === 13 || $event.keyCode === 9) && inputAddSaveProperty($event.keyCode, component)" class="radius-2 {{component.selector}}-empty-input {{component.selector}}-empty-input-{{$index}} absolute full-xy top-0 left-0" placeholder="value plz" ng-model="property.value" ng-if='property.type === "css_text"'/>
                                            <span ng-if='property.type === "css_class"'> NA </span>
                                            <dropdown ng-model="property.value" ng-if='property.type === "css_animation"'> </dropdown>
                                        </span>
                                    </div>
                                    <div>
                                        <a ng-click='component.removePropertyField(component, component.empty_time_state, $index, $parent.$index, true)' ng-repeat='property in component.empty_time_state.properties'>&times;</a>
                                    </div>
                                    <div class="full-x">
                                        <button class='bg-moxie height-36 txt-20 radius-2' ng-click='component.addPropertyField(component, component.empty_time_state)'>Add</button>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <!--end timeline-->

                    <li id='file-component-list' ng-show='time_state.selected_variation.components.length' ng-repeat='component in current_file.selected_variation.components'>
                        <span>{{$index + 1}}</span>
                        <div class='relative'>
							<h1><span class="lowercase">{{ component._id || component._class || component.name}}</span></h1>
                             <!-- &rarr; <span class="opacity-50">{{component.selector}}</span> -->
                             <span class='build-preview'>

                             </span>
                             <!-- Activate component vars-->

                            <!--  <a class="build-activate opacity-50" ng-click='component.active = !component.active' ng-if='!component.active'>off</a>
                             <a class="build-activate" ng-click='component.active = !component.active' ng-if='component.active'>on</a> -->
                            <!-- Collapse component vars-->
                            <a ng-click='updateComponentCollapsed(current_file, component)' ng-class="{'collapse': !component.collapsed}" ng-include="img_base + BASE + 'templates/svg/main/down.html'"></a>
						</div>
                        <div class="relative" ng-show='!component.collapsed'>
                            <ul class="build-save">
                                <li>
                                    <a class="build-activate" ng-include="img_base + BASE + 'templates/svg/main/commit.html'"></a>
                                </li>
                                <li>
                                    <a class="build-activate" ng-include="img_base + BASE + 'templates/svg/main/save-simple.html'"></a>
                                </li>
                            </ul>
                            <div class='component-inject overflow-hidden' ng-class="{'height-300': component.expand}"></div>
                            <a ng-if='!component.expand' class='txt-1 high-z-index absolute bottom-0 left-0 m05xy weight-300 opacity-50' ng-click='component.expand = true;'>Expand</a>
                            <a ng-if='component.expand' class='txt-1 high-z-index absolute bottom-0 left-0 m05xy weight-300 opacity-50' ng-click='component.expand = false;'>Reduce</a>
                            <a ng-click='playOneComponent(component)' class='high-z-index m05xy right-0 bottom-0 absolute'>&rtrif;</a>
                        </div>
                        <ul class="build-css-header" ng-show='!component.collapsed' >
                            <li>Time</li>
                            <li>Property</li>
                            <li>Value</li>
                        </ul>
                        <ul class="build-css-list" ng-show='!component.collapsed'>
                            <li class='init' ng-if='component.init_time_state && component.init_time_state.time < 0'>
                                <div class='relative'>
                                    <span class="radius-2-left">@T</span><span class="radius-2-right">INIT</span>
                                </div>
                                <div>
                                    <span ng-repeat='property in component.init_time_state.properties'>{{property.name}}</span>
                                </div>
                                <div>
                                    <input ng-repeat='property in component.init_time_state.properties' placeholder="value" ng-model="property.value"/>
                                </div>
                                <div>
                                    <a ng-repeat='property in component.init_time_state.properties' ng-click='component.removePropertyField(component, component.init_time_state, $index)'>&times;</a>
                                </div>
                            </li>
                            <li ng-if='component.time_states && current_file.selected_variation.time_states.length' ng-repeat='time_state in component.time_states track by $index'>
                                <div><span class="radius-2-left">@T</span><span class="radius-2-right">{{time_state.time}}</span></div>
                                <div>
                                    <span class="radius-2" ng-repeat='property in time_state.properties' ng-if='property.type === "css_text"' ng-click='component.addPropertyField(component, time_state, property.name)'>
                                        {{property.name}}
                                        <span class='opacity-50'> &nbsp;&nbsp;&nbsp;[{{property.type.replace('css_','')}}] </span>
                                    </span>
                                    <span ng-repeat='property in time_state.properties' class="build-class radius-2" ng-if='property.type === "css_class"' ng-click='component.addPropertyField(component, time_state, property.name)'>
                                        .{{property.name}}
                                        <span class='opacity-50'> &nbsp;&nbsp;&nbsp;[{{property.type.replace('css_','')}}] </span>
                                    </span>
                                    <span ng-repeat='property in time_state.properties' class="build-class radius-2" ng-if='property.type === "css_animation"' ng-click='component.addPropertyField(component, time_state, property.name)'>
                                        .{{property.name}}
                                        <span class='opacity-50'> &nbsp;&nbsp;&nbsp;[{{property.type.replace('css_','')}}] </span>
                                    </span>
                                </div>
                                <div>
                                    <span class="radius-2" ng-repeat='property in time_state.properties' ng-if='property.type === "css_text"'>{{property.value}}</span>
                                    <span ng-repeat='property in time_state.properties' class="radius-2 opacity-50" ng-if='property.type === "css_class"'>{{property.type}}</span>
                                    <dropdown ng-if='property.type === "css_animation"' ng-repeat="property in time_state.properties" ng-model="property.value"> </dropdown>
                                </div>
                                <div>
                                    <a ng-repeat='property in time_state.properties' ng-click='component.removePropertyField(component, time_state, $index, $parent.$index)'>&times;</a>
                                </div>
                            </li>
                            <li>
                                <div><span class="radius-2-left">@T</span><input class="radius-2-right" type="tel" ng-model="component.empty_time_state.time" placeholder="time"/></div>
                                <div>
                                    <span class="radius-2" ng-repeat='property in component.empty_time_state.properties'>{{property.name || 'sample property'}}</span>
                                    <button class="bg-campus" ng-click='component.addPropertyField(component, component.empty_time_state)'>+ Add</button>
                                </div>
                                <div class='empty-state-values' style='overflow:visible'>
                                    <span style="overflow:visible;" class='relative' ng-repeat='property in component.empty_time_state.properties' class='radius-2 bg-charcoal'>
                                        <input ng-keyup="($event.keyCode === 13 || $event.keyCode === 9) && inputAddSaveProperty($event.keyCode, component)" class="radius-2 {{component.selector}}-empty-input {{component.selector}}-empty-input-{{$index}} absolute full-xy top-0 left-0" placeholder="value plz" ng-model="property.value" ng-if='property.type === "css_text"'/>
                                        <span ng-if='property.type === "css_class"' class='opacity-50'>[css class]</span>
                                        <dropdown ng-model="property.value" ng-if='property.type === "css_animation"'> </dropdown>
                                    </span>





                                </div>
                                <div>
                                    <a ng-click='component.removePropertyField(component, component.empty_time_state, $index, $parent.$index, true)' ng-repeat='property in component.empty_time_state.properties'>&times;</a>
                                </div>
                                <div class="full-x">
                                    <button class='bg-moxie height-36 txt-20 radius-2' ng-click='component.addTimeState(component, component.empty_time_state)'>Save and add another</button>
                                </div>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
            <nav class="build-aside-bottom">
                <ul class='relative' style='width:100%;'>
                    <li class='flex-wrap-center full-x' ng-click="addNewTimeState()">
                        <a class="build-add-element absolute left-0" ng-hide-"!page.toggles.add_component" ng-include="img_base + BASE + 'templates/svg/main/plus.html'"></a>
                        <div class='flex-wrap-center weight-700 text-center uppercase'>
                            Add Time State
                        </div>
                    </li>
                    <!-- <li class="build-play-all">
                        <a ng-click='playStates(current_file.variations[current_file.selectedIndex].components)' ng-include="img_base + BASE + 'templates/svg/main/play.html'"></a>
                        <dropdown class="full-x" size="small" ng-if="page.dropdowns.templates" ng-model="page.dropdowns.templates"></dropdown>
                    </li>
                    <li><a class="bg bg-moxie" ng-include="img_base + BASE + 'templates/svg/main/save.html'" ng-click='saveCurrentStatesToLocalStorage()'></a></li>
                    <li><a ng-click='refreshAllComponents()' class="opacity-50" ng-include="img_base + BASE + 'templates/svg/main/switch.html'"></a></li> -->
                </ul>
            </nav>
        </aside>

        <div class='build-property-option-list fixed bg-slate-90p top-0 right-0 expanded overflow-auto' ng-show="selectPropertyActivated">
            <header>
                <input placeholder="filter options" ng-model="propertySearchText" id='property-search-input'/>
                <a ng-include="img_base + BASE + 'templates/svg/main/plus.html'" ng-click='toggleClassProperties()'></a>
            </header>
            <ul class="flex-wrap-start p15-grid full-x bg-charcoal-50p">
                <li class='flex-wrap-center full-x p20xy txt-7 txt-white text-center' id='hold-for-demo-text'>
                    Tap & Hold for Demo
                </li>
                <li>
                    <button class='txt-1 bg-gold starred normal height-36 radius-2' tabindex="-1">
                        <span ng-include="img_base + BASE + 'templates/svg/main/star.html'"></span>
                        <span>Starred</span>
                    </button>
                </li>
                <li>
                    <button class='txt-1 bg-orange flagged normal height-36 radius-2' tabindex="-1">
                        <span ng-include="img_base + BASE + 'templates/svg/main/info.html'"></span>
                        <span>Flagged</span>
                    </button>
                </li>
            </ul>
            <ul class="flex-wrap-start p15-grid full-x bg-charcoal-50p properties-list">
                <li class='flex-wrap-center full-x p20xy txt-7 txt-white text-center'>
                    Common CSS Properties {{properties.common_css_styles.length}}
                </li>
                <li ng-repeat='property in properties.common_css_styles | filter:propertySearchText |limitTo:50 track by $index'>
                    <button on-release="onReleasePropertyDemo()" on-hold="injectPropertyIntoDemo(property, 'css_text')" ng-click='component_selected.confirmPropertyField(component_selected, time_state_selected, property, "css_text")' class='txt-1 bg-moxie normal height-36 radius-2'>{{property}}</button>
                </li>
            </ul>
            <ul class="flex-wrap-start p15-grid full-x properties-list">
                <li class='flex-wrap-center full-x p20xy txt-7 txt-white text-center'>
                    Supported Animation Classes {{properties.supported_animations.length}}
                </li>
                <li ng-repeat='property in properties.supported_animations | filter:propertySearchText | limitTo:50 track by $index'>
                    <button on-hold="injectPropertyIntoDemo(property, 'css_animation')" ng-click='component_selected.confirmPropertyField(component_selected, time_state_selected, property, "css_animation" )' class='txt-1 bg-moxie normal height-36 radius-2'>{{property}}</button>
                </li>
            </ul>
            <ul class="flex-wrap-start p15-grid full-x bg-charcoal-50p properties-list">
                <li class='flex-wrap-center full-x p20xy txt-7 txt-white text-center'>
                    Supported Regular CSS Classes {{properties.supported_classes.length}}
                </li>
                <li class='property-item' ng-repeat='property in properties.supported_classes | filter:propertySearchText | limitTo:50 track by $index'>
                    <button on-hold="injectPropertyIntoDemo(property, 'css_class')" ng-click='component_selected.confirmPropertyField(component_selected, time_state_selected, property, "css_class")' class='txt-1 bg-moxie normal height-36 radius-2'>{{property}}</button>
                </li>
            </ul>
        </div>
    </div>
</ion-view>