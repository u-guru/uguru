

<ion-view hide-nav-bar='true' class='ranking guru-profile' cache-view="false">

  <ion-header-bar class='dark-bg-header'>
      <h1 class='title'>Profile</h1>
      <div class="buttons">
        <button id='E2E-editProfile' ng-if="!root.vars.profile.edit_mode" class="button button-clear button-header-link button-blue" ng-click='root.vars.profile.edit_mode = !root.vars.profile.edit_mode'>
          Edit
        </button>
        <button id='E2E-saveProfile'ng-if="root.vars.profile.edit_mode"class="button button-clear button-header-link button-submit cancel-button button-blue" ng-click='saveGuruProfile()'>
          Save
        </button>
      </div>
  </ion-header-bar>

  <div class="tabs home-request-tabs-top tabs-top">
      <a class="tab-item uppercase ng-class:{'blue-bg white-text':!profile.showCredibility, 'opacity-1-2':profile.showCredibility}" ng-click='profile.showCredibility = false;'>
        Profile <span class='align-left semibold opacity-4-5' ng-if="user.current_profile_percent">&nbsp;&nbsp;-&nbsp;&nbsp;{{user.current_profile_percent}}%</span>
      </a>
      <a class="tab-item uppercase ng-class:{'blue-bg white-text':profile.showCredibility, 'opacity-1-2':!profile.showCredibility}" ng-click='profile.showCredibility = true;'>
        Credibility <span class='align-left semibold opacity-4-5' ng-if="user.current_credibility_percent">&nbsp;&nbsp;-&nbsp;&nbsp;{{user.current_credibility_percent}}%</span>
      </a>
  </div>
   <div class="tabs home-request-tabs-top tabs-top white-text bg-edit-mode center hide ng-class:{'show':root.vars.profile.edit_mode}" style='height:44px'>
    Edit Mode: Tap any component to edit!
  </div>

<ion-content class='white-bg standard-bg guru-profile-content has-header' style='bottom:50px; top:88px;' scroll="false">

    <div class='pure-g-c flex-column flex-space-between full-height' ng-show='!profile.showCredibility'>
      <ion-scroll>
      <ion-slide-box class='guru-profile-slide-box'>
        <ion-slide style='min-height:200px;'>
          <div class='profile-banner-bg full-height' ng-style='{"background-image":"url({{img_base}}./img/profile/library.png)"}'>
          </div>
            <div class='pure-g-c flex-column j-center guru-profile-img-wrapper full-width relative'>
              <div class='pure-u-1'>
                <div class='pure-g'>
                  <div class='pure-u-1-2'>
                    <div class='padding-1em' style='padding-left:2em;'>
                      <a ng-click='root.vars.profile.edit_mode && showActionSheetProfilePhoto()'>
                        <img class='pure-img profile-img sidebar-img guru-profile-img inline'  ng-src='{{user.profile_url}}'/>
                      </a>
                    </div>
                    <div ng-include="img_base + 'templates/ratings.components.guru.html'">
                    </div>
                  </div>

                  <div class='pure-u-1-2 relative' style='padding-top:1em;'>
                    <div class='center no-margin'>
                      <a id="E2E-editProfile-editName" ng-click='root.vars.profile.edit_mode && showPopupEditName()'>
                        <h1 class='title light uppercase margin-half'>{{user.name.split(' ')[0] + ' ' + user.name.split(' ')[1][0].toUpperCase()}}.</h1>
                      </a>
                      <a id="E2E-editProfile-editSchool"  ng-click='root.vars.profile.edit_mode && goToUniversity()'>
                        <h5 id = "E2E-schoolName" class='white-text bold no-margin uppercase' value={{user.university.title}}>
                          {{user.university.title}}
                        </h5>
                      </a>

                      <a id="E2E-editProfile-editMajor"  ng-click='root.vars.profile.edit_mode && transitionToMajor()'>
                        <h5 class='uppercase guru-profile-major-text light no-margin hide ng-class:{"show":user.majors.length > 0}'>
                          {{user.majors[0].name}}
                        </h5>
                        <h5 style='padding-top:0.5em;' class='uppercase semibold no-margin blue hide ng-class:{"show":root.vars.profile.edit_mode && user.majors.length === 0}'>
                          + add a major
                        </h5>
                      </a>
                      <a ng-click='root.vars.profile.edit_mode && showMaxHourlyClicked()'>
                        <div class='container relative max-hourly-container'>
                          <h1 class='uppercase light bold' style='margin-top:8px;'>
                            ${{selectedOption.id}} <span class='profile-15m-text'>/ hour</span>
                          </h1>
                          <select ng-show='root.vars.profile.edit_mode' ng-change='maxHourlyOnChange()' id='max-hourly-select' ng-model="selectedOption" ng-options="option.label for option in maxHourlyOptions track by option.id" class='absolute'></select>
                        </div>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
        </ion-slide>
        <ion-slide style='width:100% !important;'>
              <div class='profile-banner-bg full-height' ng-style='{"background-image":"url({{img_base}}./img/profile/library.png)"}'>
              </div>
                <div class='pure-g-c flex-column j-center guru-profile-img-wrapper full-width relative'>
                  <a class='full-width hide ng-class:{"show":!root.vars.profile.edit_mode || !profile.intro_edit_mode}' ng-click='editGuruIntro()'>
                    <div class='pure-u-1 padding-3em center hide ng-class:{"show":!root.vars.profile.edit_mode}'>
                        <p class='white-text regular'> {{user.guru_introduction || 'Click edit mode to add an intro'}} </p>
                    </div>
                    <div class='pure-u-1 padding-3em center hide ng-class:{"show":root.vars.profile.edit_mode && !profile.intro_edit_mode}'>
                        <p class='white-text regular'> {{user.guru_introduction || '\nTap me to edit text'}} </p>
                    </div>
                  </a>
                  <div class='pure-u-1 white-text center hide ng-class:{"show":root.vars.profile.edit_mode && profile.intro_edit_mode}' >

                      <textarea placeholder='tell us about yourself' ng-model='user.guru_introduction'id='guru-introduction-text' class='full-width transparent-bg center regular' rows="6"></textarea>
                      <div class='pure-u-1 full-width absolute' style="left:0;">
                        <a ng-click='saveGuruIntroduction()' style='min-height:2.5em; line-height:2.5em;' nav-direction='forward' class='button button-full transparent-bg button-footer white-text uppercase no-margin'>Done</a>
                      </div>
                  </div>
              </div>

        </ion-slide>
      </ion-slide-box>
      <!-- <div class='pure-g-c flex-column j-start center'> -->
      <div class='profile-statistics-wrapper padding-1em' style='border-bottom: 1px solid rgba(0,0,0,0.4);' ng-show='user.student_sessions.length || user.response_rate'>
        <ion-scroll>
        <div class='pure-g' style='margin-top:15px;' >

              <div class='pure-u-1-3 center'>
                <div class='no-margin center padding-half' style='border-right:1px solid rgba(0,0,0,0.1);'>
                  <h1 class='no-margin' style='font-size:250%;'>
                    {{user.student_sessions.length}}
                  </h1>
                  <h5 class='opacity-3-4 no-margin semibold' style='font-size:86%; margin-top:0.7em; opacity:0.5'>
                    sessions
                  </h5>
                </div>
              </div>
              <div class='pure-u-1-3 center' style='border-right:1px solid rgba(0,0,0,0.1);'>
                <div class=' no-margin center padding-half'>
                  <h1 class='no-margin' style='font-size:250%;'>
                    {{user.response_rate || 0 + '%'}}
                  </h1>
                  <h5 class='opacity-3-4 no-margin semibold' style='font-size:86%; margin-top:0.7em; opacity:0.5'>
                    response rate
                  </h5>
                </div>
              </div>
              <div class='pure-u-1-3 center'>
                <div class='no-margin center padding-half'>
                  <h1 class='no-margin' style='font-size:250%;'>
                    <1hr
                  </h1>
                  <h5 class='opacity-3-4 no-margin semibold' style='font-size:86%; margin-top:0.7em; opacity:0.5'>
                    last active
                  </h5>
                </div>
              </div>
        </div>
      </div>
       <div class='pure-g-c flex-column j-center center'>

        <div class='pure-g'>
          <a class='pure-u-1 center' ng-click='root.vars.profile.edit_mode && transitionToGuruCourses()'>
            <div class='pure-u-1 padding-half light-border-bottom'>
              <div class='pure-g'>
                  <h4 class='semibold uppercase flex-item-c' style='color:rgba(0,0,0,0.3)'>
                    My Courses
                  </h4>
                <div class='pure-u-1'>
                  <div class='pure-g'>
                    <div class='pure-u-1 course-tag-wrapper'>
                      <span style='font-size:100%;' class='course-tag uppercase' ng-repeat='guru_course in user.guru_courses'>{{guru_course.short_name}}</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </a>

          <div class='pure-u-1 light-border-bottom'>
            <div class='pure-g'>
              <div class='pure-u-1-2 padding-half inline align-left'>
                <div class='attribute-card'>
                    <div class="title-container mdl-card--expand grey-bg center">
                      <h5 class="title white-text uppercase semibold">Late night friendly</h5>
                    </div>
                    <div class="card-body center relative late-night-container">
                      <h2 class='opacity-1-2' style='font-size:150%'>
                        I'm up until <br> <strong> {{selectedOptionLateNight.name}} </strong>
                      </h2>
                      <select ng-show='root.vars.profile.edit_mode' ng-change='lateNightOnChange()' id='late-night-select' ng-model="selectedOptionLateNight" ng-options="option.name for option in lateNightMappingOptions track by option.id" class='absolute full-width full-height'></select>
                    </div>
                </div>
              </div>
              <div class='pure-u-1-2 padding-half'>
                <a class='attribute-card' ng-click='root.vars.profile.edit_mode && transitionToGuruExperiences()'>
                    <div class="title-container mdl-card--expand grey-bg center">
                      <h5 class="title white-text uppercase semibold padding-horizontal-only padding-1em">Teaching Experience</h5>
                    </div>
                    <div class="card-body">
                      <h2 class='opacity-1-2' style='font-size:150%'>
                        <div class="hide ng-class:{'show':user.guru_experiences.length > 0}" ng-repeat='experience in user.guru_experiences'>{{experience.name}} - {{experience.years}} years</div>
                        <div class='uppercase semibold no-margin blue hide ng-class:{"show":user.guru_experiences.length === 0}'>
                          + Add an experience
                        </div>
                      </h2>
                    </div>
                </a>
              </div>
              <div class='pure-u-1-2 padding-half inline'>
                <a class='attribute-card' ng-click='root.vars.profile.edit_mode && transitionToGuruRemote()'>
                    <div class="title-container mdl-card--expand grey-bg center">
                      <h5 class="title white-text uppercase semibold padding-horizontal-only padding-1em">Remote Friendly</h5>
                    </div>
                    <div class="card-body">
                      <h2 class='opacity-1-2' style='font-size:150%' ng-show="user.skype_friendly || user.facetime_friendly || user.hangouts_friendly || user.messenger_friendly || user.phone_friendly || user.text_friendly || user.email_friendly">
                        <div class='hide ng-class:{"show":user.skype_friendly}'> Skype </div>
                        <div class='hide ng-class:{"show":user.facetime_friendly}'> FaceTime </div>
                        <div class='hide ng-class:{"show":user.hangouts_friendly}'> Hangouts </div>
                        <div class='hide ng-class:{"show":user.messenger_friendly}'> Instant Chat </div>
                        <div class='hide ng-class:{"show":user.phone_friendly}'> Phone Call </div>
                        <div class='hide ng-class:{"show":user.text_friendly}'> Text Msg </div>
                        <div class='hide ng-class:{"show":user.email_friendly}'> Email </div>
                      </h2>
                      <h2 class='opacity-1-2' style='font-size:150%;' ng-show='!(user.skype_friendly || user.facetime_friendly || user.hangouts_friendly || user.messenger_friendly || user.phone_friendly || user.text_friendly || user.email_friendly)'>
                        <div> In-person only </div>
                      </h2>
                    </div>
                </a>
              </div>
              <div class='pure-u-1-2 padding-half'>
                <a class='attribute-card' ng-click='root.vars.profile.edit_mode && transitionToGuruLanguages()'>
                    <div class="title-container mdl-card--expand grey-bg center">
                      <h5 class="title white-text uppercase semibold padding-horizontal-only padding-1em">Spoken Languages</h5>
                    </div>
                    <div class="card-body">
                      <h2 class='opacity-1-2' style='font-size:150%'>
                        <div ng-repeat='language in user.guru_languages'>{{language.name}}</div>
                        <div class='uppercase semibold no-margin blue hide ng-class:{"show":user.guru_languages.length === 0}'>
                          + Add a language
                        </div>
                      </h2>
                    </div>
                </div>
              </a>

            </div>
          </div>
        </div>
      </div>
    </div>
  </ion-scroll>
</ion-scroll>
  <input type='file' id='file-input-guru-edit-profile' onchange="angular.element(this).scope().file_changed(this)" style='display:none'/>
  <div class='full-height windows-top-margin' ng-show='profile.showCredibility' style='top:88px;'>
    <div ng-include="img_base + 'templates/guru.credibility.components.html'" class='full-height'>
    </div>
  </div>

</ion-content>

<div class="tabs tabs-icon-only white-bg" id='guru-tab-bar'>
  <a class="tab-item" id='home-button' href='#/guru' nav-direction='home'>
    <img class='pure-img icon' ng-src='{{img_base}}./img/request/house-icon-outline.svg'></i>
  </a>
  <a class="tab-item" id='profile-tab-button' nav-direction='swap' href='#/guru-profile'>
    <i class='icon ion-person blue'> </i>
  </a>
  <a class="tab-item" id='guru-courses-button' nav-direction='swap' href='#/guru-conversations'>
    <img class='pure-img icon' ng-src='{{img_base}}./img/request/guru_book_outline.svg'></i>
  </a>
  <a class="tab-item" ng-click='toggleRightSideMenu()' id='settings-button'>
    <img class='pure-img icon' ng-src='{{img_base}}./img/settings-tab-guru.svg'/>
  </a>
</div>


</ion-view>
