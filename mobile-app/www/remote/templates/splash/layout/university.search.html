<div ng-controller='UniversitySearchController as uniSearch' class="bg-slate">
    <!-- If user has already selected university-->
    <div class="splash-university-selected relative full-xy" ng-if='uniSearch.layout.edit_mode' ng-include="img_base + BASE + 'templates/splash/container/university.selected.html'"></div>

    <!-- If user needs to select university -->


    <!--TODO:

    Events/Actions/Transitions
    - [] onEnter via the controller
    - [] onExit
    - [] onDomReady
    - [] onMapReady
    - [] onEditUniversity: "edit mode"
    - [] onSelectUniversity


    Components
    1. Loader
    2. Back button
-->

    <div class="splash-school-loader-container" class-on-activate="fadeOut:animOut, z-index--1000:keep" class-on-activate-delay="2000">
        <div class="splash-school-loader">
            <div>
                <span class="splash-school-loader-counter" counter init-on-class="counter:activate" counter-max="165" counter-min="0" counter-duration="2" counter-delay="1000">0</span>
                <span>schools found</span>
            </div>
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>

    <div class="projector-slide absolute center-xy">
        <svg class="projector-line" width="2px" height="196px" viewBox="0 0 4 392">
            <path d="M2,2 L2,392" fill="none" stroke="#FFFFFF" stroke-width="4" stroke-linecap="round" opacity="0.6" stroke-linejoin="round" stroke-dasharray="16,14"></path>
        </svg>
        <div class="projector-top"></div>
        <div class="projector-content">
            <div class-on-clear="slideOutUp:animOut" ng-if='!uniSearch.layout.edit_mode' class='splash-school-search absolute left-0 top-0 full-xy flex-wrap-center show-splash-university' id='splash-university' activate-on-class="show-splash-university" class-on-activate="opacity-1-impt:inject#splash-university [class-on-activate]|activate, opacity-1-impt:inject"
                class-on-activate-delay="1500" style='overflow:hidden;'>
                <div class='splash-map zoom-{{uniSearch.layout.map.zoom}} bg-slate' style="height:calc(100%);" class-on-activate="fadeIn:anim" class-on-activate-delay="400">
                    <ui-gmap-google-map id="splash-google-map" class='opacity-0 full-xy absolute top-0 left-0' center="uniSearch.layout.map.center" refresh='uniSearch.layout.map.refresh' bounds="mapBounds" bounces="uniSearch.layout.map.bounds" events="uniSearch.layout.map.events"
                        options='uniSearch.layout.map.options' control="uniSearch.layout.map.control" pan="true" zoom="uniSearch.layout.map.zoom" class-on-activate="fadeIn:anim" class-on-activate-delay="550">
                        <ui-gmap-markers models="uniSearch.layout.map.markers" coords="'self'" options="'options'" icon="'icon'" clusterOptions="uniSearch.layout.map.clusterOptions" clusterEvents="uniSearch.layout.map.clusterEvents" doCluster="true">
                        </ui-gmap-markers>
                    </ui-gmap-google-map>
                </div>
                <div class="splash-zoom opacity-0 absolute high-z-index" class-on-activate="fadeIn:anim" class-on-activate-delay="1000">Tap to Zoom</div>
                <div class="splash-school-search-form" ng-controller="AddUniversityCtrl">
                    <div class="opacity-0 p15xy max-1030" class-on-activate="bounceInDown:anim" class-on-activate-delay="1000">
                        <form>
                            <fieldset class="large with-icon full-x">
                                <input class="input-border light" type="search" id='request-search-input' name='request-search-input' autocomplete="off" fast-matcher fast-matcher-source="universities" fast-matcher-output="filtered_universities" fast-matcher-properties="short_name, full_name, tiny_name, variations"
                                    ng-model="search_text.university" ng-focus='focusUniversitySearchInput' placeholder="search {{universities.length}} supported schools" />
                                <label></label>
                                <span class="input-icon">
                    					<svg viewBox="0 0 100 100">
                    						<path d="M42.5,71 C58.2401154,71 71,58.2401154 71,42.5 C71,26.7598846 58.2401154,14 42.5,14 C26.7598846,14 14,26.7598846 14,42.5 C14,58.2401154 26.7598846,71 42.5,71 Z M62.994485,62.994485 L85.6624699,85.6624699"></path>
                    					</svg>
                    				</span>
                                <a class="side-icon desktop-input-close-icon activated" ng-click="search_text.university = '';" ng-if="search_text.university.trim().length > 0">
                                    <i class="icon ion-close-circled txt-white"></i>
                                </a>
                            </fieldset>
                        </form>
                    </div>
                    <ul class="splash-school-desktop" class-on-activate="null:inject.splash-school-desktop li|activate">
                        <li ng-repeat='university in universities | filter:search_text.university:strict | limitTo: 5 track by $index' class="matrix-0" class-on-activate="u-bounceIn:keep" class-on-activate-delay="{{1000 + (300 * ($index + 1)) }}">
                            <div class="school-card">
                                <!-- ng-class="{'activate':$index < 5}" class-on-activate="magictime:anim, boingInUp:anim, null:inject.school-card-icon-container|a" -->
                                <svg class="rect" viewBox="0 0 300 200">
                                    <rect x="0" y="0" width="300" height="200" fill="none"></rect>
                                </svg>
                                <input type="radio" name="school-card" ng-click='uniSearch.selectUniversityFromSearch(university)' class-on-click="null:inject.splash-school-desktop li|clear, null:inject#splash-school-search-guru|activate" />
                                <div class="school-card-inside">
                                    <div class="school-card-top" style="background-color: {{university.school_color_one}};">
                                        <div class="school-card-icon-container">
                                            <span class="school-card-icon" style="background-image: url({{university.svg_url || university.seal_url || university.logo_url}}); border-color: {{university.school_color_one}};">
                                                    <span class="school-card-icon-bg" style="background-color: {{university.school_color_one}};"></span>
                                            <span class="school-card-state" ng-include="img_base + 'templates/svg/main/check.html'"></span>
                                            <span class="school-card-state" ng-include="img_base + 'templates/svg/main/plus.html'"></span>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="school-card-main no-footer">
                                        <div class="school-card-map"></div>
                                        <div class="school-card-color" style="background-color: {{university.school_color_one}};"></div>
                                        <div class="school-card-info">
                                            <h1 style="color: {{university.school_color_one}};">{{university.short_name || university.name}}</h1>
                                            <h1>{{university.short_name || university.name}}</h1>
                                            <h2 style="color: {{university.school_color_one}};"><span>{{university.city}}</span>,&nbsp;<span>{{university.state}}</span></h2>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="absolute bottom-0 center-x m15xy z-index-1000">
                <div id="splash-school-search-guru" class="guru-head" ng-include="img_base + 'templates/svg/guru-head.html'" class="transition-150" translate-on-class="activate" translate-on-class-delay="1500" translate-to-elem="#splash-guru-head"></div>
                <svg class="absolute" viewBox="0 0 340 205" style="top: -40px; left: -160px; width: 170px;">
                    <g fill="none">
                        <path d="M197.223004,186.289595 C230.124127,175.599372 259.195925,160.754252 282.227028,143.962428 C294.858905,154.565768 305.000002,166.999998 337.99999,161.000007 C324.999989,152 314.999992,138.000007 315.855826,113.112054 C334.099853,91.2130052 341.862051,68.3669818 335.358834,48.3521367 C320.254948,1.86715683 233.921194,-11.7431829 142.526996,17.9525921 C51.1327982,47.648367 -10.7127194,109.405071 4.39116616,155.890051 C19.4950517,202.375031 105.828806,215.98537 197.223004,186.289595 L197.223004,186.289595 Z"
                            fill="#40484b" fill-opacity="0.5" stroke="#FFFFFF" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path>
                        <text transform="translate(173.347656, 110.679688) rotate(-19.000000) translate(-173.347656, -110.679688) " font-family="Source Sans Pro" font-size="40" font-weight="normal" line-spacing="40" fill="#FFFFFF">
                            <tspan x="38.8476562" y="109.679688">we can help you</tspan>
                            <tspan x="91.8676562" y="149.679688">with that!</tspan>
                        </text>
                    </g>
                </svg>
            </div>
        </div>
        <svg class="projector-handle" width="61px" height="24px" viewBox="0 0 122 48">
            <path d="M116.813759,2 L119.407837,16.1511345 C121.400182,27.0197169 114.265024,37.7105153 103.431627,39.9081948 C103.431627,39.9081948 77.5373297,46 60.9999232,46 C44.4625167,46 18.5495835,39.9045365 18.5495835,39.9045365 C7.74411375,37.6544772 0.597741646,27.0302069 2.59200971,16.1511345 L5.18608711,2"
                fill="none" stroke-width="4" stroke="#FFFFFF" stroke-linecap="round" stroke-linejoin="round"></path>
        </svg>
    </div>
</div>
<a class='absolute high-z-index bottom-0 right-0' ng-click='deactivateUniversitySearch()'>
        Close
    </a>
</div>