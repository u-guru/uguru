<header class="bg-slate">
    <h1 class='bg-cobalt-25p txt-18 p15xy txt-center'>Action Items</h1>
</header>
<ion-pane id='cta-modal-platforms' class='absolute full-xy hide-display cta-modal bg-charcoal z-index-10' ng-include="img_base + BASE + 'templates/admin/keys.action.platforms.html'"></ion-pane>
<div id = 'main-state-content' class="overflow-auto no-scrollbar" style="height: calc(100% - 48px)">
    <ul class="p15-grid">


        <li ng-repeat='flow in user_workflows'>
            <div>
                <button class="bg-moxie height-36 txt-18 radius-2" ng-click='flow.isExpand = !flow.isExpand'>Expand(+){{flow.scene_states.length}} states</button>
            </div>
            <div class="bg-white-10p radius-2 flex-space-between-center-vertical">
                <h2 class="p15xy txt-18 semibold">{{flow.name}}</h2>
                <ul class="flex p15-grid">
                    <li>
                        <button class="bg-moxie height-36 txt-18 radius-2" ng-click='flow.routes.staging.launch()'>Master</button>
                    </li>
                    <li>
                        <button class="bg-robin height-36 txt-18 radius-2" ng-click='flow.routes.local.launch()'>Local</button>
                    </li>
                    <li>
                        <form action="http://codepen.io/pen/define" method="POST" target="_blank" ng-if='flow.codepenData.html && flow.codepenData.html.length'>
                          <input class='opacity-0 invisible' type="hidden" name="data" value='{{flow.codepenData}}'>
                          <input class="bg-azure height-36 txt-18 radius-2 semibold p15x"  id='codepen-input' type="submit" value="Codepen">
                        </form>
                        <button ng-click='flow.routes.codepen.launch(flow, $event)' ng-if='!flow.codepenData.html.length' class="bg-azure height-36 txt-18 radius-2 semibold p15x">Codepen</button>
                    </li>
                    <li>
                        <button class="bg-lake height-36 txt-18 radius-2" ng-click='flow.spec.launch()'>Spec</button>
                    </li>
                    <li>
                        <span class="round flex-center width-36 height-36 txt-14 border-moxie border-3 semibold" ng-click='flow.spec.progress'>78%</span>
                    </li>
                  <!--   <li>
                        <span class="round flex-center width-36 height-36 txt-14 border-moxie border-3 semibold" ng-click='flow.spec.progress'>Phone</span>
                    </li> -->
                    <li>
                        <span class="round flex-center width-36 height-36 txt-14 border-auburn border-3 semibold" ng-click='flow.bugs.count'>3</span>
                    </li>
                </ul>
            </div>
            <!-- Expend the steps -->
            <!-- <ul ng-if="isStateExpand('')"> -->
            <ul ng-if ='flow.isExpand'>
                <li ng-repeat='state in flow.scene_states'>
                <h2 class="p15xy txt-18 semibold">{{state.name}}</h2>
                    <ul class="flex p15-grid">
                        <li>
                            <button class="bg-lake height-36 txt-18 radius-2" ng-click='flow.spec.launch()'>Spec</button>
                        </li>

                        <li>
                            <span class="round flex-center width-36 height-36 txt-14 border-moxie border-3 semibold" ng-click='openPlatforms($event,state.tests,$index)'>Phone</span>
                        </li>
                        <li>
                            <span class="round flex-center width-36 height-36 txt-14 border-auburn border-3 semibold" ng-click='flow.bugs.count'>3</span>
                        </li>
                    </ul> 
                </li>
            </ul>
        </li>
    </ul>
</div>

